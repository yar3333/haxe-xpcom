<!DOCTYPE html>
<html lang="en-US" dir="ltr" class="redesign no-js">

<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Aug 2014 20:21:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
        
    <title>nsINavHistoryService - Mozilla | MDN</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
  <link rel="home" href="https://developer.mozilla.org/en-US/">
  <link rel="copyright" href="#copyright">

  <link href="../../../../../../../../mozorg.cdn.mozilla.net/media/css/tabzilla-min.css" type="text/css" rel="stylesheet">
              <link rel="stylesheet" media="all" href="../../../../../../../../developer.cdn.mozilla.net/media/css/mdn-min46d5.css?build=9fd3034" />

      
    <link rel="stylesheet" media="all" href="../../../../../../../../developer.cdn.mozilla.net/media/css/wiki-min46d5.css?build=9fd3034" />

          <link rel="stylesheet" type="text/css"
            href="https://developer.mozilla.org/en-US/docs/Template:CustomCSS?raw=1" />
    
    
  <!-- common social tags -->
    <meta property="og:type" content="website">
  <meta property="og:image" content="https://developer.mozilla.org/media/redesign/img/opengraph-logo.png">
  <meta property="og:site_name" content="Mozilla Developer Network">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://developer.mozilla.org/media/redesign/img/opengraph-logo.png">
  <meta name="twitter:site" content="@NewOnMDN">
  <meta name="twitter:creator" content="@NewOnMDN">

  <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon144.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon114.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon72.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon57.png">
  <!-- basic favicon -->
          <link rel="shortcut icon" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon32.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script src="https://developer.cdn.mozilla.net/media/js/libs/html5.js"></script>
  <![endif]-->

    <link rel="alternate" type="application/json" href="nsINavHistoryService%24json.json">
  <link rel="canonical" href="nsINavHistoryService.html" >

  
  <!-- document-specific social tags -->
  <meta property="og:title" content="nsINavHistoryService">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService">
  <meta name="twitter:title" content="nsINavHistoryService">
    <meta property="og:description" content="Implemented by: &#34;@mozilla.org/browser/nav-history-service;1&#34;. To use this service, use:">
  <meta name="description" content="Implemented by: &#34;@mozilla.org/browser/nav-history-service;1&#34;. To use this service, use:">
  <meta name="twitter:description" content="Implemented by: &#34;@mozilla.org/browser/nav-history-service;1&#34;. To use this service, use:">
  
      <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','../../../../../../../../www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-36116321-5', 'mozilla.org');
    ga('set', 'anonymizeIp', true);

    
    
    
    (function() {
        // http://cfsimplicity.com/61/removing-analytics-clutter-from-campaign-urls
        var win = window;
        var removeUtms = function(){
            var location = win.location;
            if (location.hash.indexOf('utm') != -1) {
                var anchor = location.hash.match(/#(?!utm)[^&]+/);
                anchor = anchor ? anchor[0] : '';
                if(!anchor && win.history.replaceState){
                    history.replaceState({}, '', location.pathname + location.search);
                } else {
                    location.hash = anchor;
                }
            }
        };

        ga('send', 'pageview', removeUtms(win.location + ''));
    })();
</script>
  <script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VgAEV1RTGwABU1NSAAQ="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o?o:e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e){function n(t,e,n){n||(n={});for(var r=o[t],a=r&&r.length||0,s=n[i]||(n[i]={}),u=0;a>u;u++)r[u].apply(s,e);return s}function r(t,e){var n=o[t]||(o[t]=[]);n.push(e)}var o={},i="nr@context";e.exports={on:r,emit:n}},{}],2:[function(t){function e(t,e,n,i,s){return u?u-=1:r("err",[s||new UncaughtException(t,e,n)]),"function"==typeof a?a.apply(this,o(arguments)):!1}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function n(t){r("err",[t,(new Date).getTime()])}var r=t("handle"),o=t(6),i=t(5),a=window.onerror,s=!1,u=0;t("loader").features.push("err"),window.onerror=e,NREUM.noticeError=n;try{throw new Error}catch(d){"stack"in d&&(t(1),t(2),"addEventListener"in window&&t(3),window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&t(4),s=!0)}i.on("fn-start",function(){s&&(u+=1)}),i.on("fn-err",function(t,e,r){s&&(this.thrown=!0,n(r))}),i.on("fn-end",function(){s&&!this.thrown&&u>0&&(u-=1)}),i.on("internal-error",function(t){r("ierr",[t,(new Date).getTime(),!0])})},{1:5,2:4,3:3,4:6,5:1,6:14,handle:"D5DuLP",loader:"G9z0Bl"}],3:[function(t){function e(t){r.inPlace(t,["addEventListener","removeEventListener"],"-",n)}function n(t){return t[1]}var r=t(1),o=(t(3),t(2));if(e(window),"getPrototypeOf"in Object){for(var i=document;i&&!i.hasOwnProperty("addEventListener");)i=Object.getPrototypeOf(i);i&&e(i);for(var a=XMLHttpRequest.prototype;a&&!a.hasOwnProperty("addEventListener");)a=Object.getPrototypeOf(a);a&&e(a)}else XMLHttpRequest.prototype.hasOwnProperty("addEventListener")&&e(XMLHttpRequest.prototype);o.on("addEventListener-start",function(t){if(t[1]){var e=t[1];"function"==typeof e?this.wrapped=e["nr@wrapped"]?t[1]=e["nr@wrapped"]:e["nr@wrapped"]=t[1]=r(e,"fn-"):"function"==typeof e.handleEvent&&r.inPlace(e,["handleEvent"],"fn-")}}),o.on("removeEventListener-start",function(t){var e=this.wrapped;e&&(t[1]=e)})},{1:15,2:1,3:14}],4:[function(t){var e=(t(3),t(1)),n=t(2);e.inPlace(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"raf-"),n.on("raf-start",function(t){t[0]=e(t[0],"fn-")})},{1:15,2:1,3:14}],5:[function(t){function e(t){var e=t[0];"string"==typeof e&&(e=new Function(e)),t[0]=n(e,"fn-")}var n=(t(3),t(1)),r=t(2);n.inPlace(window,["setTimeout","setInterval","setImmediate"],"setTimer-"),r.on("setTimer-start",e)},{1:15,2:1,3:14}],6:[function(t){function e(){o.inPlace(this,s,"fn-")}function n(t,e){o.inPlace(e,["onreadystatechange"],"fn-")}function r(t,e){return e}var o=t(1),i=t(2),a=window.XMLHttpRequest,s=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"];window.XMLHttpRequest=function(t){var n=new a(t);try{i.emit("new-xhr",[],n),o.inPlace(n,["addEventListener","removeEventListener"],"-",function(t,e){return e}),n.addEventListener("readystatechange",e,!1)}catch(r){try{i.emit("internal-error",r)}catch(s){}}return n},window.XMLHttpRequest.prototype=a.prototype,o.inPlace(XMLHttpRequest.prototype,["open","send"],"-xhr-",r),i.on("send-xhr-start",n),i.on("open-xhr-start",n)},{1:15,2:1}],7:[function(t){function e(){function e(t){if("string"==typeof t&&t.length)return t.length;if("object"!=typeof t)return void 0;if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if("undefined"!=typeof FormData&&t instanceof FormData)return void 0;try{return JSON.stringify(t).length}catch(e){return void 0}}function n(t){var n=this.params,r=this.metrics;if(!this.ended){this.ended=!0;for(var i=0;u>i;i++)t.removeEventListener(s[i],this.listener,!1);if(!n.aborted){if(r.duration=(new Date).getTime()-this.startTime,4===t.readyState){n.status=t.status;var a=t.responseType,d="arraybuffer"===a||"blob"===a||"json"===a?t.response:t.responseText,f=e(d);if(f&&(r.rxSize=f),this.sameOrigin){var c=t.getResponseHeader("X-NewRelic-App-Data");c&&(n.cat=c.split(", ").pop())}}else n.status=0;r.cbTime=this.cbTime,o("xhr",[n,r])}}}function r(t,e){var n=i(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}t("loader").features.push("xhr");var o=t("handle"),i=t(1),a=t(5),s=["load","error","abort","timeout"],u=s.length,d=t(2);t(3),t(4),a.on("new-xhr",function(){this.totalCbs=0,this.called=0,this.cbTime=0,this.end=n,this.ended=!1,this.xhrGuids={}}),a.on("open-xhr-start",function(t){this.params={method:t[0]},r(this,t[1]),this.metrics={}}),a.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),a.on("send-xhr-start",function(t,n){var r=this.metrics,o=t[0],i=this;if(r&&o){var d=e(o);d&&(r.txSize=d)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(i.params.aborted=!0),("load"!==t.type||i.called===i.totalCbs&&(i.onloadCalled||"function"!=typeof n.onload))&&i.end(n)}catch(e){try{a.emit("internal-error",e)}catch(r){}}};for(var f=0;u>f;f++)n.addEventListener(s[f],this.listener,!1)}),a.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),a.on("xhr-load-added",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),a.on("xhr-load-removed",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),a.on("addEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-added",[t[1],t[2]],e)}),a.on("removeEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-removed",[t[1],t[2]],e)}),a.on("fn-start",function(t,e,n){e instanceof XMLHttpRequest&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),a.on("fn-end",function(t,e){this.xhrCbStart&&a.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent)&&e()},{1:8,2:11,3:3,4:6,5:1,handle:"D5DuLP",loader:"G9z0Bl"}],8:[function(t,e){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");return!r.port&&o[1]&&(r.port=o[1].split("https://developer.mozilla.org/")[0].split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname),r.sameOrigin=!e.hostname||e.hostname===document.domain&&e.port===n.port&&e.protocol===n.protocol,r}},{}],handle:[function(t,e){e.exports=t("D5DuLP")},{}],D5DuLP:[function(t,e){function n(t,e){var n=r[t];return n?n.apply(this,e):(o[t]||(o[t]=[]),void o[t].push(e))}var r={},o={};e.exports=n,n.queues=o,n.handlers=r},{}],11:[function(t,e){function n(t){if(!t||"object"!=typeof t&&"function"!=typeof t)return-1;if(t===window)return 0;if(o.call(t,"__nr"))return t.__nr;try{return Object.defineProperty(t,"__nr",{value:r,writable:!0,enumerable:!1}),r}catch(e){return t.__nr=r,r}finally{r+=1}}var r=1,o=Object.prototype.hasOwnProperty;e.exports=n},{}],loader:[function(t,e){e.exports=t("G9z0Bl")},{}],G9z0Bl:[function(t,e){function n(){var t=p.info=NREUM.info;if(t&&t.agent&&t.licenseKey&&t.applicationID&&u&&u.body){p.proto="https"===c.split(":")[0]||t.sslForHttp?"https://":"http://",a("mark",["onload",i()]);var e=u.createElement("script");e.src=p.proto+t.agent,u.body.appendChild(e)}}function r(){"complete"===u.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=t("handle"),s=window,u=s.document,d="addEventListener",f="attachEvent",c=(""+location).split("?")[0],p=e.exports={offset:i(),origin:c,features:[]};u[d]?(u[d]("DOMContentLoaded",o,!1),s[d]("load",n,!1)):(u[f]("onreadystatechange",r),s[f]("onload",n)),a("mark",["firstbyte",i()])},{handle:"D5DuLP"}],14:[function(t,e){function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=n},{}],15:[function(t,e){function n(t,e,r,s){function nrWrapper(){try{var n,a=u(arguments),d=this,f=r&&r(a,d)||{}}catch(c){i([c,"",[a,d,s],f])}o(e+"start",[a,d,s],f);try{return n=t.apply(d,a)}catch(p){throw o(e+"err",[a,d,p],f),p}finally{o(e+"end",[a,d,n],f)}}return a(t)?t:(e||(e=""),nrWrapper[n.flag]=!0,nrWrapper)}function r(t,e,r,o){r||(r="");var i,s,u,d="-"===r.charAt(0);for(u=0;u<e.length;u++)s=e[u],i=t[s],a(i)||(t[s]=n(i,d?s+r:r,o,s,t))}function o(t,e,n){try{s.emit(t,e,n)}catch(r){i([r,t,e,n])}}function i(t){try{s.emit("internal-error",t)}catch(e){}}function a(t){return!(t&&"function"==typeof t&&t.apply&&!t[n.flag])}var s=t(1),u=t(2);e.exports=n,n.inPlace=r,n.flag="nr@wrapper"},{1:1,2:14}]},{},["G9z0Bl",2,7]);</script></head>
<body data-slug="Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService" contextmenu="edit-history-menu" class="document  ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

                    (function(){
  var FLAGS = {
    'derby_closed': true,'ga_outbound_links': true,'kumaediting': false,'page_move': false,'promote_script': false,'redirect_messages': false,'top_contributors': false,'wiki_spellcheck': false
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'render_stale_documents_async': true,'enable_optimizely': false
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

                
        // This represents the site configuration
        win.mdn = {
            build: '9fd3034',
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to media (images, CSS, JS) in MDN
            mediaPath: 'https://developer.cdn.mozilla.net/media/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            },
        };

        // Ensures gettext always returns something, is always set
        win.gettext = function(x) {
            return x;
        }
    })(window);
</script>
  

  
  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
          <li><a href="#q" id="skip-search">Skip to search</a></li>
      </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div class="clear header-login">
      <a href="http://www.mozilla.org/" id="tabzilla" class="no-track">mozilla</a>
                <script src="../../../../../../../../login.persona.org/include.js"></script>
<script type="text/javascript">
(function() {
  var allauth = window.allauth = window.allauth || {};

  function startWatching() {
    navigator.id.watch({
      onlogin: function(assertion) {
        // TODO: next url handling
        document.getElementById("_persona_assertion").value = assertion;
        document.getElementById("_persona_login").submit();
      },
      onlogout: function() {
        // TODO
      }
    })
  };

  allauth.persona = {
    login: function(nextUrl, process) {
        document.getElementById("_persona_next_url").value = nextUrl || '';
        document.getElementById("_persona_process").value = process;
        startWatching();
        navigator.id.request({"siteName": "Mozilla Developer Network", "siteLogo": "/media/redesign/img/opengraph-logo.png"});
    }
  }
})();
</script>

<form id="_persona_login" method="post" action="https://developer.mozilla.org/users/persona/login/">
  <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='OFUZvWX3cvltHNznKujHNL8vtsBRoNMa' /></div>
  <input type="hidden" name="next" value="" id="_persona_next_url"/>
  <input type="hidden" name="process" value="" id="_persona_process"/>
  <input type="hidden" name="assertion" id="_persona_assertion"/>
</form>

  <form>
      <div class="oauth-login-container" tabIndex="0">
          <div class="oauth-login-options">
              <span>Sign in with</span>
              <span class="oauth-icon oauth-persona" title="Sign in with Persona"><i class="icon-user" aria-hidden="true"></i></span>
                      </div>
          <div class="submenu oauth-login-picker" aria-hidden="true">
              <ul>
                  <li><a href="javascript:allauth.persona.login('/en\u002DUS/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService', 'login')" class="persona-button persona-loaded login-link" data-next="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService" data-service="Persona"><i class="icon-user" aria-hidden="true"></i>Persona</a></li>
                              </ul>
          </div>
      </div>
  </form>
          </div>

    <a href="https://developer.mozilla.org/en-US/" class="logo">Mozilla Developer Network</a>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Zones<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-single" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Apps">App Center</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox">Firefox</a></li>
              <li><a href="https://developer.mozilla.org/en-US/Marketplace">Firefox Marketplace</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox_OS">Firefox OS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Persona">Persona</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Platform<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/API">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/Apps">Apps</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References & Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/demos/">Demos</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Tools</a></li><li><a href="https://developer.mozilla.org/en-US/demos/">Demos</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Connect">Connect</a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" data-placeholder="Search" data-value="" value="" />
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  
   <!-- end is_zone -->


    <div class="wiki-main-content" id="document-main"><div class="center">
            <div class="article-meta">
        <!-- action buttons -->
        
        
        

  <ul class="page-buttons" data-sticky="false"><li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-globe"></i></button>

        <div class="submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
                              <li class="smaller">No translations exist for this document.</li>
              
                              <li><a href="https://developer.mozilla.org/en-US/users/signin/?next=/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService%24locales">Add a translation</a></li>
                          </ul>
          </div>
        </div></li><li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/users/signin/?next=/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService%24edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li><li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>

        <div class="submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="nsINavHistoryService%24history.html">History</a></li>
                                                                
                
                                
                                                                <li class="page-print"><a href="#" onclick="return window.print();"  title="Print page">Print this page</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
          <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla" rel="v:url" property="v:title">Mozilla</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech" rel="v:url" property="v:title">Mozilla technologies</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM" rel="v:url" property="v:title">XPCOM</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference" rel="v:url" property="v:title">XPCOM reference</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="../Interface.html" rel="v:url" property="v:title">XPCOM Interface Reference</a></li>
        <li class="crumb" typeof="v:Breadcrumb" property="v:title">nsINavHistoryService</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>
        <h1>nsINavHistoryService</h1>
        
      </div>
      
      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-closed wiki-left-none">

          
          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

                          <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
                            <!-- table of contents -->
              <div id="toc" class="toc toggleable">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <code></code><code></code><code></code><li><a href="#Method_overview" rel="internal">Method overview</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#Attributes" rel="internal">Attributes</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#Constants" rel="internal">Constants</a><ol><li><a href="#Transition_type_constants" rel="internal">Transition type constants</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code></ol></li><li><a href="#Methods" rel="internal">Methods</a><ol><li><a href="#getPageTitle()" rel="internal">getPageTitle()</a><code></code><li><a href="#markPageAsFollowedBookmark()" rel="internal">markPageAsFollowedBookmark()</a><code></code><code></code><code></code><li><a href="#markPageAsTyped()" rel="internal">markPageAsTyped()</a><code></code><li><a href="#markPageAsFollowedLink()" rel="internal">markPageAsFollowedLink()</a><code></code><li><a href="#canAddURI()" rel="internal">canAddURI()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#addVisit()" rel="internal">addVisit()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getNewQuery()" rel="internal">getNewQuery()</a><code></code><li><a href="#getNewQueryOptions()" rel="internal">getNewQueryOptions()</a><code></code><li><a href="#executeQuery()" rel="internal">executeQuery()</a><code></code><code></code><li><a href="#executeQueries()" rel="internal">executeQueries()</a><code></code><code></code><code></code><li><a href="#queryStringToQueries()" rel="internal">queryStringToQueries()</a><code></code><code></code><code></code><code></code><li><a href="#queriesToQueryString()" rel="internal">queriesToQueryString()</a><code></code><code></code><code></code><li><a href="#addObserver()" rel="internal">addObserver()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#removeObserver()" rel="internal">removeObserver()</a><code></code><li><a href="#runInBatchMode()" rel="internal">runInBatchMode()</a><code></code><code></code><code></code><code></code><li><a href="#importHistory()" rel="internal">importHistory()</a><code></code><li><a href="#getCharsetForURI()" rel="internal">getCharsetForURI()</a><code></code><li><a href="#getCharsetForURI()" rel="internal">setCharsetForURI()</a><code></code><code></code><li><a href="#See_also" rel="internal">See also</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code></ol></li>
                </ol>
              </div>
                            </div>
            
                                                  
            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              
              
                                                                                          
              <!-- just the article content -->
              <article id="wikiArticle">
                                                      <p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;"> 
<div style="background: #eee; padding: 2px;"><code><a class="external" href="http://mxr.mozilla.org/mozilla-central/source/toolkit/components/places/public/nsINavHistoryService.idl" rel="custom">toolkit/components/places/public/nsINavHistoryService.idl</a></code><span style="text-align: right; float: right;"><a href="en-US/docs/Interfaces/About_Scriptable_Interfaces.html" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div> 
<span style="padding: 4px 2px;"> 
 
This interface provides complex query functions, more fine-grained getters and setters. 
</span> 
 
  <div style="height: 42px; position: relative; padding: 2px; width: auto;"> 
 
  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div> 
   
  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">28</div> 
   
  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 12.5%;"></div> 
   
<div style="height: 8px; top: 16px; left: 12.5%; background: #00dd00; position: absolute; width: 87.5%;" title="Introduced in Gecko 1.8 (Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)"></div> 
 
<div style="top: 0px; font-size: 11px; position: absolute; left: 12.5%;">Introduced</div> 
<div style="top: 22px; font-size: 11px; position: absolute; left: 12.5%;">Gecko 1.8</div> 
 
    <div style="height: 8px; top: 16px; left: 80.75%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 22 (Firefox 22 / Thunderbird 22 / SeaMonkey 2.19)"></div> 
     
</div> 
 
<div style="background: #eee; padding: 2px;"> 
Inherits from: <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISupports" title="">nsISupports</a></code> 
<span style="text-align: right; float: right;">Last changed in Gecko 22 (Firefox 22 / Thunderbird 22 / SeaMonkey 2.19)</span></div> 
</div><p></p>
<p>Implemented by: <code>"@mozilla.org/browser/nav-history-service;1"</code>. To use this service, use:</p>
<pre class="eval">var historyService = Components.classes["@mozilla.org/browser/nav-history-service;1"]
                               .getService(Components.interfaces.nsINavHistoryService);
</pre>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td><code>AString <a href="#getPageTitle()">getPageTitle</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI" title="en/nsIURI">nsIURI</a> aURI);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#markPageAsFollowedBookmark()">markPageAsFollowedBookmark</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI" title="en/nsIURI">nsIURI</a> aURI);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#markPageAsFollowedLink()">markPageAsFollowedLink</a>(in nsIURI aURI); </code><span class="badge geckoVersionBadge" title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)"><span class="badgeText">Requires Gecko 22.0</span></span></td>
  </tr>
  <tr>
   <td><code>void <a href="#markPageAsTyped()">markPageAsTyped</a>(in nsIURI aURI); </code><span class="badge geckoVersionBadge" title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)"><span class="badgeText">Requires Gecko 22.0</span></span></td>
  </tr>
  <tr>
   <td><code>boolean <a href="#canAddURI()">canAddURI</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI" title="en/nsIURI">nsIURI</a> aURI);</code></td>
  </tr>
  <tr>
   <td><code>long long <a href="#addVisit()">addVisit</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI" title="en/nsIURI">nsIURI</a> aURI, in PRTime aTime, in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI" title="en/nsIURI">nsIURI</a> aReferringURI, in long aTransitionType, in boolean aIsRedirect, in long long aSessionID); </code><span class="inlineIndicator obsolete obsoleteInline" title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)">Obsolete since Gecko 22.0</span></td>
  </tr>
  <tr>
   <td><code><a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQuery" title="en/nsINavHistoryQuery">nsINavHistoryQuery</a> <a href="#getNewQuery()">getNewQuery</a>();</code></td>
  </tr>
  <tr>
   <td><code><a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQueryOptions" title="en/nsINavHistoryQueryOptions">nsINavHistoryQueryOptions</a> <a href="#getNewQueryOptions()">getNewQueryOptions</a>();</code></td>
  </tr>
  <tr>
   <td><code><a href="https://developer.mozilla.org/en/nsINavHistoryResult" title="en/nsINavHistoryResult">nsINavHistoryResult</a> <a href="#executeQuery()">executeQuery</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQuery" title="en/nsINavHistoryQuery">nsINavHistoryQuery</a> aQuery, in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQueryOptions" title="en/nsINavHistoryQueryOptions">nsINavHistoryQueryOptions</a> options);</code></td>
  </tr>
  <tr>
   <td><code><a href="https://developer.mozilla.org/en/nsINavHistoryResult" title="en/nsINavHistoryResult">nsINavHistoryResult</a> <a href="#executeQueries()">executeQueries</a>([array,size_is(aQueryCount)] in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQuery" title="en/nsINavHistoryQuery">nsINavHistoryQuery</a> aQueries, in unsigned long aQueryCount, in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQueryOptions" title="en/nsINavHistoryQueryOptions">nsINavHistoryQueryOptions</a> options);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#queryStringToQueries()">queryStringToQueries</a>(in <a href="https://developer.mozilla.org/en/AUTF8String" title="en/AUTF8String">AUTF8String</a> aQueryString, [array, size_is(aResultCount)] out <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQuery" title="en/nsINavHistoryQuery">nsINavHistoryQuery</a> aQueries, out unsigned long aResultCount, out <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQueryOptions" title="en/nsINavHistoryQueryOptions">nsINavHistoryQueryOptions</a> options);</code></td>
  </tr>
  <tr>
   <td><code><a href="https://developer.mozilla.org/en/AUTF8String" title="en/AUTF8String">AUTF8String</a> <a href="#queriesToQueryString()">queriesToQueryString</a>([array, size_is(aQueryCount)] in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQuery" title="en/nsINavHistoryQuery">nsINavHistoryQuery</a> aQueries, in unsigned long aQueryCount, in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryQueryOptions" title="en/nsINavHistoryQueryOptions">nsINavHistoryQueryOptions</a> options);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#addObserver()">addObserver</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryObserver" title="en/nsINavHistoryObserver">nsINavHistoryObserver</a> observer, in boolean ownsWeak);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#removeObserver()">removeObserver</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsINavHistoryObserver" title="en/nsINavHistoryObserver">nsINavHistoryObserver</a> observer);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#runInBatchMode()">runInBatchMode</a>(in <a href="https://developer.mozilla.org/en/NsINavHistoryBatchCallback" title="en/NsINavHistoryBatchCallback">nsINavHistoryBatchCallback</a> aCallback, in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsISupports" title="en/nsISupports">nsISupports</a> aClosure);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#importHistory()">importHistory</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIFile" title="en/nsIFile">nsIFile</a> file);</code></td>
  </tr>
  <tr>
   <td><code>AString <a href="#getCharsetForURI()">getCharsetForURI</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI" title="en/nsIURI">nsIURI</a> aURI);</code></td>
  </tr>
  <tr>
   <td><code>AString <a href="#setCharsetForURI()">setCharsetForURI</a>(in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI" title="en/nsIURI">nsIURI</a> aURI, in AString aCharset);</code></td>
  </tr>
 </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>hasHistoryEntries</code></td>
   <td><code>boolean</code></td>
   <td><code>True</code> if there is any history. This can be used in UI to determine whether the "clear history" button should be enabled or not. This is much better than using <code>BrowserHistory.count</code> since that can be very slow if there is a lot of history (it must enumerate each item). This is pretty fast.</td>
  </tr>
  <tr>
   <td><code>historyDisabled</code></td>
   <td><code>boolean</code></td>
   <td><code>True</code> if history is disabled. currently, history is disabled if the <code>browser.history_expire_days</code> pref is <code>"0"</code>.</td>
  </tr>
 </tbody>
</table>
<h2 id="Constants" name="Constants">Constants</h2>
<h3 id="Transition_type_constants">Transition type constants</h3>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Constant</td>
   <td class="header">Value</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>TRANSITION_LINK</code></td>
   <td>1</td>
   <td>This transition type means the user followed a link and got a new toplevel window.</td>
  </tr>
  <tr>
   <td><code>TRANSITION_TYPED</code></td>
   <td>2</td>
   <td>This transition type is set when the user typed the URL to get to the page.</td>
  </tr>
  <tr>
   <td><code>TRANSITION_BOOKMARK</code></td>
   <td>3</td>
   <td>This transition type is set when the user followed a bookmark to get to the page.</td>
  </tr>
  <tr>
   <td><code>TRANSITION_EMBED</code></td>
   <td>4</td>
   <td>This transition type is set when some inner content is loaded. This is true of all images on a page, and the contents of the iframe. It is also true of any content in a frame, regardless if whether or not the user clicked something to get there.</td>
  </tr>
  <tr>
   <td><code>TRANSITION_REDIRECT_PERMANENT</code></td>
   <td>5</td>
   <td>This transition type is set when the transition was a permanent redirect.</td>
  </tr>
  <tr>
   <td><code>TRANSITION_REDIRECT_TEMPORARY</code></td>
   <td>6</td>
   <td>This transition type is set when the transition was a temporary redirect.</td>
  </tr>
  <tr>
   <td><code>TRANSITION_DOWNLOAD</code></td>
   <td>7</td>
   <td>This transition type is set when the transition is a download.</td>
  </tr>
  <tr>
   <td><code>TRANSITION_FRAMED_LINK</code> </td>
   <td>8</td>
   <td>This transition type is set when the user followed a link that loaded a page in a frame.</td>
  </tr>
 </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<h3 id="getPageTitle()" name="getPageTitle()">getPageTitle()</h3>
<p>This method retrieves the original title of the page.</p>
<pre class="eval">AString getPageTitle(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  The page whose title needs to be retrieved.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns the original title of the page.</p>
<h3 id="markPageAsFollowedBookmark()" name="markPageAsFollowedBookmark()">markPageAsFollowedBookmark()</h3>
<p>This method is just like <code>markPageAsTyped</code> (in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIBrowserHistory" title="">nsIBrowserHistory</a></code>, also implemented by the history service), but for bookmarks. It declares that the given URI is being opened as a result of following a bookmark. If this URI is loaded soon after this message has been received, that transition will be marked as following a bookmark.</p>
<pre class="eval">void markPageAsFollowedBookmark(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  The page that is to be marked as followed by a bookmark.</dd>
</dl>
<p></p><div> 
    <span class="indicatorInHeadline standardNote standardNoteMethod">Requires Gecko 22.0 (Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)</span> 
    <h3 id="markPageAsTyped()" name="markPageAsTyped()">markPageAsTyped()</h3> 
</div><p></p>
<p>This method designates the URL as having been explicitly typed in by the user, so it can be used as an autocomplete result. It is called by the URL bar when the user types in a URL. This can be and is called before the page is actually added to history, since the page isn't added until it actually starts loading. The typed flag affects the URL bar autocomplete. This will cause the transition type of the next visit of the URL to be marked as "typed."</p>
<pre class="eval">void markPageAsTyped(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  The page that is to be marked as typed by the user.</dd>
</dl>
<p></p><div> 
    <span class="indicatorInHeadline standardNote standardNoteMethod">Requires Gecko 22.0 (Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)</span> 
    <h3 id="markPageAsFollowedLink()" name="markPageAsFollowedLink()">markPageAsFollowedLink()</h3> 
</div><p></p>
<p>Designates the specified URL as coming from a link explicitly followed by the user (for example by clicking on it).</p>
<pre class="eval">void markPageAsFollowedLink(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  The URL that is to be marked as explicitly followed by the user.</dd>
</dl>
<h3 id="canAddURI()" name="canAddURI()">canAddURI()</h3>
<p>This method checks if the given URI would be added to the history or not. Many types of URIs, such as <code>"chrome:"</code> URIs, are not stored when <code>addURI</code> is called. This function allows you to determine whether it will be or not.</p>
<p>You don't have to worry about calling this, <code>addPageToSession</code>/<code>addURI</code> will always check before actually adding the page. This function is public because some components may want to check if this page would go in the history (That is for annotations).</p>
<pre class="eval">boolean canAddURI(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  The URI that needs to be added to the history system.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns <code>true</code> if this URI would be added to the history, otherwise returns <code>false</code>.</p>
<p></p><div> 
        <span class="indicatorInHeadline obsolete obsoleteMethod">Obsolete since Gecko 22.0 (Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)</span> 
        <h3 id="addVisit()">addVisit()</h3> 
        </div><p></p>
<div class="note">
 <p><strong>Note:</strong> This method was removed in <span title="(Firefox 22.0 / Thunderbird 22.0 / SeaMonkey 2.19)">GeckoÂ 22.0</span>. You should use the new async API <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/mozIAsyncHistory#updatePlaces()">mozIAsyncHistory.updatePlaces()</a></code> instead. See <a class="external" href="../../../../../../../../hg.mozilla.org/mozilla-central/annotate/81dd97739fa1/browser/base/content/test/head.html#l200" title="http://hg.mozilla.org/mozilla-central/annotate/81dd97739fa1/browser/base/content/test/head.js#l200">this code</a> for how a function to add visits and handle errors using the new API could look like.</p>
</div>
<p>This method adds a visit for a specific page. This will probably not be commonly used other than for backup/restore type operations. If the URI does not have an entry in the history database already, one will be created with no visits, no title, hidden, not typed. Adding a visit will automatically increment the visit count for the visited page and will unhide it and/or mark it typed according to the transition type.</p>
<pre class="eval">long long addVisit(
  in nsIURI aURI, 
  in PRTime aTime,
  in <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIURI" title="en/nsIURI">nsIURI</a> aReferringURI,
  in long aTransitionType,
  in boolean aIsRedirect,
  in long long aSessionID ); </pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  The visited page.</dd>
 <dt>
  <code>aTime</code></dt>
 <dd>
  The time page was visited (microseconds).</dd>
 <dt>
  <code>aReferringURI</code></dt>
 <dd>
  The URI of the visit that generated this one. Use <code>null</code> for no referrer.</dd>
 <dt>
  <code>aTransitionType</code></dt>
 <dd>
  The type of transition: one of <code>TRANSITION_*</code> defined above.</dd>
 <dt>
  <code>aIsRedirect</code></dt>
 <dd>
  <code>True</code> if the given visit redirects to somewhere else (That is you will create a visit out of here that is a redirect transition). This causes this page to be hidden in normal history views (unless it has been unhidden by visiting it with a non-redirect).</dd>
 <dt>
  <code>aSessionID</code></dt>
 <dd>
  The session ID that this page belongs to. Use <code>"0"</code> for no session.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns the ID of the created visit. This will be <code>"0"</code> if the URI is not valid for adding to history (<code>canAddURI = false</code>).</p>
<h3 id="getNewQuery()" name="getNewQuery()">getNewQuery()</h3>
<p>This method returns a new query object that you can pass to <code>executeQuery/ies</code> methods. It will be initialized to all empty (so using it will give you all history).</p>
<pre class="eval">nsINavHistoryQuery getNewQuery();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a new query object.</p>
<h3 id="getNewQueryOptions()" name="getNewQueryOptions()">getNewQueryOptions()</h3>
<p>This method returns a new options object that you can pass to <code>executeQuery/ies</code> methods after setting the desired options.</p>
<pre class="eval">nsINavHistoryQueryOptions getNewQueryOptions();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a new options object.</p>
<h3 id="executeQuery()" name="executeQuery()">executeQuery()</h3>
<p>This method executes a query with a single query object and options. All the parameters set on the query object will be ANDed together.</p>
<pre class="eval">nsINavHistoryResult executeQuery(
  in nsINavHistoryQuery aQuery,
  in nsINavHistoryQueryOptions options
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aQuery</code></dt>
 <dd>
  The query object.</dd>
 <dt>
  <code>options</code></dt>
 <dd>
  The options object.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a new result object.</p>
<h3 id="executeQueries()" name="executeQueries()">executeQueries()</h3>
<p>This method is similar to <a href="#executeQuery()">executeQuery</a> method. It executes an array of queries. All of the query objects are ORed together. Within a query, all the terms are ANDed together as in <a href="#executeQuery()">executeQuery</a> method.</p>
<pre class="eval">nsINavHistoryResult executeQueries(
  [array,size_is(aQueryCount)] in nsINavHistoryQuery aQueries,
  in unsigned long aQueryCount,
  in nsINavHistoryQueryOptions options
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aQueries</code></dt>
 <dd>
  The queries object.</dd>
 <dt>
  <code>aQueryCount</code></dt>
 <dd>
  The count of queries.</dd>
 <dt>
  <code>options</code></dt>
 <dd>
  The options object.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a new result object.</p>
<h3 id="queryStringToQueries()" name="queryStringToQueries()">queryStringToQueries()</h3>
<p>This method converts a query URI-like string to an array of actual query objects for use to <a href="#executeQueries()">executeQueries</a> method. The output query array may be empty if there is no information. However, there will always be an options structure returned (if nothing is defined, it will just have the default values).</p>
<pre class="eval">void queryStringToQueries(
  in AUTF8String aQueryString,
  [array, size_is(aResultCount)] out nsINavHistoryQuery aQueries,
  out unsigned long aResultCount,
  out nsINavHistoryQueryOptions options
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aQueryString</code></dt>
 <dd>
  The query URI-like string.</dd>
 <dt>
  <code>aQueries</code></dt>
 <dd>
  The queries object.</dd>
 <dt>
  <code>aResultCount</code></dt>
 <dd>
  The count of converted queries.</dd>
 <dt>
  <code>options</code></dt>
 <dd>
  The options object.</dd>
</dl>
<h3 id="queriesToQueryString()" name="queriesToQueryString()">queriesToQueryString()</h3>
<p>This method converts a query into an equivalent string that can be persisted. Inverse of <a href="#queryStringToQueries()">queryStringToQueries</a> method.</p>
<pre class="eval">AUTF8String queriesToQueryString(
  [array, size_is(aQueryCount)] in nsINavHistoryQuery aQueries,
  in unsigned long aQueryCount,
  in nsINavHistoryQueryOptions options
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aQueries</code></dt>
 <dd>
  The queries object.</dd>
 <dt>
  <code>aQueryCount</code></dt>
 <dd>
  The count queries.</dd>
 <dt>
  <code>options</code></dt>
 <dd>
  The options object.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns the converted query into an equivalent string query.</p>
<h3 id="addObserver()" name="addObserver()">addObserver()</h3>
<p>This method adds a history observer. If <code>ownsWeak</code> is <code>false</code>, the history service will keep an owning reference to the observer. If <code>ownsWeak</code> is <code>true</code>, then <code>aObserver</code> must implement <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISupportsWeakReference" title="">nsISupportsWeakReference</a></code>, and the history service will keep a weak reference to the observer.</p>
<pre class="eval">void addObserver(
  in nsINavHistoryObserver observer, 
  in boolean ownsWeak
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>observer</code></dt>
 <dd>
  The history observer to be added.</dd>
 <dt>
  <code>ownsWeak</code></dt>
 <dd>
  The owning reference state <code>(boolean)</code>.</dd>
</dl>
<h3 id="removeObserver()" name="removeObserver()">removeObserver()</h3>
<p>This method removes a history observer.</p>
<pre class="eval">void removeObserver(
  in nsINavHistoryObserver observer
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>observer</code></dt>
 <dd>
  The history observer to be removed.</dd>
</dl>
<h3 id="runInBatchMode()" name="runInBatchMode()">runInBatchMode()</h3>
<p>This method runs the passed callback in batch mode. Use this when a lot of things are about to change. Calls can be nested, observers will only be notified when all batches begin/end.</p>
<pre class="eval">void runInBatchMode(
  in nsINavHistoryBatchCallback aCallback,
  in nsISupports aClosure
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aCallback</code></dt>
 <dd>
  <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryBatchCallback" title="">nsINavHistoryBatchCallback</a></code> interface to call.</dd>
 <dt>
  <code>aClosure</code></dt>
 <dd>
  Opaque parameter passed to <code><a class="new" href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavBookmarksBatchCallback" title="">nsINavBookmarksBatchCallback</a></code>.</dd>
</dl>
<h3 id="importHistory()" name="importHistory()">importHistory()</h3>
<p>This method imports the given Mork history file.</p>
<pre class="eval">void importHistory(
  in nsIFile file
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>file</code></dt>
 <dd>
  The Mork history file to import.</dd>
</dl>
<h3 id="getCharsetForURI()" name="getCharsetForURI()">getCharsetForURI()</h3>
<p>Gets the stored character-set for an URI.</p>
<pre class="eval">void getCharsetForURI(
  in nsIURI aURI 
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  URI to retrieve character-set for</dd>
</dl>
<h6 id="Returns" name="Returns">Returns</h6>
<p>Returns the character-set, empty string if not found</p>
<p>Â </p>
<h3 id="getCharsetForURI()" name="getCharsetForURI()">setCharsetForURI()</h3>
<p>Gets the stored character-set for an URI.</p>
<pre class="eval">void getCharsetForURI(
  in nsIURI aURI,
  in AString aCharset
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  URI to set character-set for</dd>
 <dt>
  <code>aCharacterSet</code></dt>
 <dd>
  character-set to be set</dd>
</dl>
<h3 id="See_also" name="See_also">See also</h3>
<ul>
 <li><a href="https://developer.mozilla.org/en/Places" title="en/Places">Places</a></li>
 <li><a href="https://developer.mozilla.org/en/Using_the_Places_history_service" title="en/Using_the_Places_history_service">Using the Places history service</a></li>
 <li><a href="https://developer.mozilla.org/en/Querying_Places" title="en/Querying_Places">Querying Places</a></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryBatchCallback" title="">nsINavHistoryBatchCallback</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryContainerResultNode" title="">nsINavHistoryContainerResultNode</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryFullVisitResultNode" title="">nsINavHistoryFullVisitResultNode</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryObserver" title="">nsINavHistoryObserver</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryQuery" title="">nsINavHistoryQuery</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryQueryOptions" title="">nsINavHistoryQueryOptions</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryQueryResultNode" title="">nsINavHistoryQueryResultNode</a></code></li>
 <li><code><a class="new" href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryResult" title="">nsINavHistoryResult</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryResultNode" title="">nsINavHistoryResultNode</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryResultTreeViewer" title="">nsINavHistoryResultTreeViewer</a></code></li>
 <li><code><a class="new" href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryResultViewObserver" title="">nsINavHistoryResultViewObserver</a></code></li>
 <li><code><a class="new" href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryResultViewer" title="">nsINavHistoryResultViewer</a></code></li>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsINavHistoryVisitResultNode" title="">nsINavHistoryVisitResultNode</a></code></li>
</ul>
<dl>
 <br>
</dl>
                                                </article>

              
                <!-- attachments list -->
                
                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                                                      <!-- tags if present -->
                  <div class="tag-attach-list tags contributor-sub">
                    <i aria-hidden="true" class="icon-tags"></i><strong>Tags:</strong>
                    <ul class="tag-list"><li><a href="https://developer.mozilla.org/en-US/docs/tag/Extensions">Extensions</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Interfaces:Scriptable">Interfaces:Scriptable</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM">XPCOM</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Interfaces">Interfaces</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM API Reference">XPCOM API Reference</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM Interface Reference">XPCOM Interface Reference</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Developing Mozilla">Developing Mozilla</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Places">Places</a></li></ul>
                  </div>
                                    <div class="contributor-sub"> <i aria-hidden="true" class="icon-group"></i><strong>Contributors to this page:</strong> <a href="https://developer.mozilla.org/en-US/profiles/Editmonkey">Editmonkey</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/stevefox">stevefox</a>, <a href="https://developer.mozilla.org/en-US/profiles/Bomfog">Bomfog</a>, <a href="https://developer.mozilla.org/en-US/profiles/kscarfone">kscarfone</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/philikon">philikon</a>, <a href="https://developer.mozilla.org/en-US/profiles/BenB">BenB</a>, <a href="https://developer.mozilla.org/en-US/profiles/Wjjohnst">Wjjohnst</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mook">Mook</a>, <a href="https://developer.mozilla.org/en-US/profiles/Arehman4">Arehman4</a>, <a href="https://developer.mozilla.org/en-US/profiles/One">One</a> </div>                                      <div class="contributor-sub">
                      <i aria-hidden="true" class="icon-clock-o"></i><strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>,
                      <time datetime="2014-04-14T10:42:59-07:00">Apr 14, 2014 10:42:59 AM</time>
                    </div>
                                  </div>
                          </div>

                      </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="$edit" label="Edit page"></menuitem>
    <menuitem data-action="$history" label="View page history"></menuitem>
  </menu>
  </div></main>

  <!-- Footer -->
  <footer><div class="center">
    <div class="column-container">
      <div class="column-main">
                <p>
          <bdi>&copy; 2005-2014 Mozilla Developer Network and individual contributors<br /> Content is available under <a href="https://developer.mozilla.org/en-US/docs/Project:MDN/About#Copyrights_and_licenses">these licenses</a> &middot; <a href="https://developer.mozilla.org/en-US/docs/Project:MDN/About">About MDN</a> &middot; <a href="http://github.com/mozilla/kuma">Contribute to the code</a> &middot; <a href="http://www.mozilla.org/privacy/websites/">Privacy policy</a></bdi>        </p>
              </div>
      <div class="column-strip">
                                  </div>
    </div>
  </div></footer>

  <!-- site js -->
    <script src="https://developer.mozilla.org/en-US/jsi18n/build:9fd3034"></script>
  
      <!--[if lte IE 8]><script src="/media/redesign/js/libs/selectivizr-1.0.2/selectivizr-build.js?build=9fd3034"></script><![endif]-->

    <script src="../../../../../../../../developer.cdn.mozilla.net/media/js/main-min46d5.js?build=9fd3034"></script>

          <script>
        mdn.analytics.trackOutboundLinks(document.body);
      </script>
    
          <script src="../../../../../../../../developer.cdn.mozilla.net/media/js/wiki-min46d5.js?build=9fd3034"></script>
      
    <script type="text/javascript">
      jQuery('.from-search-toc').mozSearchResults('');
  </script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"beacon-3.newrelic.com","queueTime":1,"licenseKey":"42869b6ed3","agent":"js-agent.newrelic.com/nr-411.min.js","transactionName":"b1QHMUtVDRdSW0YKXVYeIxBXVxcNXFYdFFtTWEsTUFEUFwlcXQBHVVQLEQ==","applicationID":"3172075","errorBeacon":"bam.nr-data.net","applicationTime":488}</script></body>

<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsINavHistoryService by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Aug 2014 20:21:40 GMT -->
</html>