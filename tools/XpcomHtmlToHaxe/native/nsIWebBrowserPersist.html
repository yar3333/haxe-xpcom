<!DOCTYPE html>
<html lang="en-US" dir="ltr" class="redesign no-js">

<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Aug 2014 20:27:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
        
    <title>nsIWebBrowserPersist - Mozilla | MDN</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
  <link rel="home" href="https://developer.mozilla.org/en-US/">
  <link rel="copyright" href="#copyright">

  <link href="../../../../../../../../mozorg.cdn.mozilla.net/media/css/tabzilla-min.css" type="text/css" rel="stylesheet">
              <link rel="stylesheet" media="all" href="../../../../../../../../developer.cdn.mozilla.net/media/css/mdn-min46d5.css?build=9fd3034" />

      
    <link rel="stylesheet" media="all" href="../../../../../../../../developer.cdn.mozilla.net/media/css/wiki-min46d5.css?build=9fd3034" />

          <link rel="stylesheet" type="text/css"
            href="https://developer.mozilla.org/en-US/docs/Template:CustomCSS?raw=1" />
    
    
  <!-- common social tags -->
    <meta property="og:type" content="website">
  <meta property="og:image" content="https://developer.mozilla.org/media/redesign/img/opengraph-logo.png">
  <meta property="og:site_name" content="Mozilla Developer Network">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://developer.mozilla.org/media/redesign/img/opengraph-logo.png">
  <meta name="twitter:site" content="@NewOnMDN">
  <meta name="twitter:creator" content="@NewOnMDN">

  <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon144.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon114.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon72.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon57.png">
  <!-- basic favicon -->
          <link rel="shortcut icon" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon32.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script src="https://developer.cdn.mozilla.net/media/js/libs/html5.js"></script>
  <![endif]-->

    <link rel="alternate" type="application/json" href="nsIWebBrowserPersist%24json.json">
  <link rel="canonical" href="nsIWebBrowserPersist.html" >

            <link rel="alternate" hreflang="fr" href="https://developer.mozilla.org/fr/docs/XPCOM_Interface_Reference/nsIWebBrowserPersist" title="nsIWebBrowserPersist">
      
  <!-- document-specific social tags -->
  <meta property="og:title" content="nsIWebBrowserPersist">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist">
  <meta name="twitter:title" content="nsIWebBrowserPersist">
    <meta property="og:description" content="Implemented by: @mozilla.org/embedding/browser/nsWebBrowser;1 and @mozilla.org/embedding/browser/nsWebBrowserPersist;1. To create an instance, use:">
  <meta name="description" content="Implemented by: @mozilla.org/embedding/browser/nsWebBrowser;1 and @mozilla.org/embedding/browser/nsWebBrowserPersist;1. To create an instance, use:">
  <meta name="twitter:description" content="Implemented by: @mozilla.org/embedding/browser/nsWebBrowser;1 and @mozilla.org/embedding/browser/nsWebBrowserPersist;1. To create an instance, use:">
  
      <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','../../../../../../../../www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-36116321-5', 'mozilla.org');
    ga('set', 'anonymizeIp', true);

    
    
    
    (function() {
        // http://cfsimplicity.com/61/removing-analytics-clutter-from-campaign-urls
        var win = window;
        var removeUtms = function(){
            var location = win.location;
            if (location.hash.indexOf('utm') != -1) {
                var anchor = location.hash.match(/#(?!utm)[^&]+/);
                anchor = anchor ? anchor[0] : '';
                if(!anchor && win.history.replaceState){
                    history.replaceState({}, '', location.pathname + location.search);
                } else {
                    location.hash = anchor;
                }
            }
        };

        ga('send', 'pageview', removeUtms(win.location + ''));
    })();
</script>
  <script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VgAEV1RTGwABU1NSAAQ="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o?o:e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e){function n(t,e,n){n||(n={});for(var r=o[t],a=r&&r.length||0,s=n[i]||(n[i]={}),u=0;a>u;u++)r[u].apply(s,e);return s}function r(t,e){var n=o[t]||(o[t]=[]);n.push(e)}var o={},i="nr@context";e.exports={on:r,emit:n}},{}],2:[function(t){function e(t,e,n,i,s){return u?u-=1:r("err",[s||new UncaughtException(t,e,n)]),"function"==typeof a?a.apply(this,o(arguments)):!1}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function n(t){r("err",[t,(new Date).getTime()])}var r=t("handle"),o=t(6),i=t(5),a=window.onerror,s=!1,u=0;t("loader").features.push("err"),window.onerror=e,NREUM.noticeError=n;try{throw new Error}catch(d){"stack"in d&&(t(1),t(2),"addEventListener"in window&&t(3),window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&t(4),s=!0)}i.on("fn-start",function(){s&&(u+=1)}),i.on("fn-err",function(t,e,r){s&&(this.thrown=!0,n(r))}),i.on("fn-end",function(){s&&!this.thrown&&u>0&&(u-=1)}),i.on("internal-error",function(t){r("ierr",[t,(new Date).getTime(),!0])})},{1:5,2:4,3:3,4:6,5:1,6:14,handle:"D5DuLP",loader:"G9z0Bl"}],3:[function(t){function e(t){r.inPlace(t,["addEventListener","removeEventListener"],"-",n)}function n(t){return t[1]}var r=t(1),o=(t(3),t(2));if(e(window),"getPrototypeOf"in Object){for(var i=document;i&&!i.hasOwnProperty("addEventListener");)i=Object.getPrototypeOf(i);i&&e(i);for(var a=XMLHttpRequest.prototype;a&&!a.hasOwnProperty("addEventListener");)a=Object.getPrototypeOf(a);a&&e(a)}else XMLHttpRequest.prototype.hasOwnProperty("addEventListener")&&e(XMLHttpRequest.prototype);o.on("addEventListener-start",function(t){if(t[1]){var e=t[1];"function"==typeof e?this.wrapped=e["nr@wrapped"]?t[1]=e["nr@wrapped"]:e["nr@wrapped"]=t[1]=r(e,"fn-"):"function"==typeof e.handleEvent&&r.inPlace(e,["handleEvent"],"fn-")}}),o.on("removeEventListener-start",function(t){var e=this.wrapped;e&&(t[1]=e)})},{1:15,2:1,3:14}],4:[function(t){var e=(t(3),t(1)),n=t(2);e.inPlace(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"raf-"),n.on("raf-start",function(t){t[0]=e(t[0],"fn-")})},{1:15,2:1,3:14}],5:[function(t){function e(t){var e=t[0];"string"==typeof e&&(e=new Function(e)),t[0]=n(e,"fn-")}var n=(t(3),t(1)),r=t(2);n.inPlace(window,["setTimeout","setInterval","setImmediate"],"setTimer-"),r.on("setTimer-start",e)},{1:15,2:1,3:14}],6:[function(t){function e(){o.inPlace(this,s,"fn-")}function n(t,e){o.inPlace(e,["onreadystatechange"],"fn-")}function r(t,e){return e}var o=t(1),i=t(2),a=window.XMLHttpRequest,s=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"];window.XMLHttpRequest=function(t){var n=new a(t);try{i.emit("new-xhr",[],n),o.inPlace(n,["addEventListener","removeEventListener"],"-",function(t,e){return e}),n.addEventListener("readystatechange",e,!1)}catch(r){try{i.emit("internal-error",r)}catch(s){}}return n},window.XMLHttpRequest.prototype=a.prototype,o.inPlace(XMLHttpRequest.prototype,["open","send"],"-xhr-",r),i.on("send-xhr-start",n),i.on("open-xhr-start",n)},{1:15,2:1}],7:[function(t){function e(){function e(t){if("string"==typeof t&&t.length)return t.length;if("object"!=typeof t)return void 0;if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if("undefined"!=typeof FormData&&t instanceof FormData)return void 0;try{return JSON.stringify(t).length}catch(e){return void 0}}function n(t){var n=this.params,r=this.metrics;if(!this.ended){this.ended=!0;for(var i=0;u>i;i++)t.removeEventListener(s[i],this.listener,!1);if(!n.aborted){if(r.duration=(new Date).getTime()-this.startTime,4===t.readyState){n.status=t.status;var a=t.responseType,d="arraybuffer"===a||"blob"===a||"json"===a?t.response:t.responseText,f=e(d);if(f&&(r.rxSize=f),this.sameOrigin){var c=t.getResponseHeader("X-NewRelic-App-Data");c&&(n.cat=c.split(", ").pop())}}else n.status=0;r.cbTime=this.cbTime,o("xhr",[n,r])}}}function r(t,e){var n=i(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}t("loader").features.push("xhr");var o=t("handle"),i=t(1),a=t(5),s=["load","error","abort","timeout"],u=s.length,d=t(2);t(3),t(4),a.on("new-xhr",function(){this.totalCbs=0,this.called=0,this.cbTime=0,this.end=n,this.ended=!1,this.xhrGuids={}}),a.on("open-xhr-start",function(t){this.params={method:t[0]},r(this,t[1]),this.metrics={}}),a.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),a.on("send-xhr-start",function(t,n){var r=this.metrics,o=t[0],i=this;if(r&&o){var d=e(o);d&&(r.txSize=d)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(i.params.aborted=!0),("load"!==t.type||i.called===i.totalCbs&&(i.onloadCalled||"function"!=typeof n.onload))&&i.end(n)}catch(e){try{a.emit("internal-error",e)}catch(r){}}};for(var f=0;u>f;f++)n.addEventListener(s[f],this.listener,!1)}),a.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),a.on("xhr-load-added",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),a.on("xhr-load-removed",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),a.on("addEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-added",[t[1],t[2]],e)}),a.on("removeEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-removed",[t[1],t[2]],e)}),a.on("fn-start",function(t,e,n){e instanceof XMLHttpRequest&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),a.on("fn-end",function(t,e){this.xhrCbStart&&a.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent)&&e()},{1:8,2:11,3:3,4:6,5:1,handle:"D5DuLP",loader:"G9z0Bl"}],8:[function(t,e){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");return!r.port&&o[1]&&(r.port=o[1].split("https://developer.mozilla.org/")[0].split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname),r.sameOrigin=!e.hostname||e.hostname===document.domain&&e.port===n.port&&e.protocol===n.protocol,r}},{}],handle:[function(t,e){e.exports=t("D5DuLP")},{}],D5DuLP:[function(t,e){function n(t,e){var n=r[t];return n?n.apply(this,e):(o[t]||(o[t]=[]),void o[t].push(e))}var r={},o={};e.exports=n,n.queues=o,n.handlers=r},{}],11:[function(t,e){function n(t){if(!t||"object"!=typeof t&&"function"!=typeof t)return-1;if(t===window)return 0;if(o.call(t,"__nr"))return t.__nr;try{return Object.defineProperty(t,"__nr",{value:r,writable:!0,enumerable:!1}),r}catch(e){return t.__nr=r,r}finally{r+=1}}var r=1,o=Object.prototype.hasOwnProperty;e.exports=n},{}],loader:[function(t,e){e.exports=t("G9z0Bl")},{}],G9z0Bl:[function(t,e){function n(){var t=p.info=NREUM.info;if(t&&t.agent&&t.licenseKey&&t.applicationID&&u&&u.body){p.proto="https"===c.split(":")[0]||t.sslForHttp?"https://":"http://",a("mark",["onload",i()]);var e=u.createElement("script");e.src=p.proto+t.agent,u.body.appendChild(e)}}function r(){"complete"===u.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=t("handle"),s=window,u=s.document,d="addEventListener",f="attachEvent",c=(""+location).split("?")[0],p=e.exports={offset:i(),origin:c,features:[]};u[d]?(u[d]("DOMContentLoaded",o,!1),s[d]("load",n,!1)):(u[f]("onreadystatechange",r),s[f]("onload",n)),a("mark",["firstbyte",i()])},{handle:"D5DuLP"}],14:[function(t,e){function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=n},{}],15:[function(t,e){function n(t,e,r,s){function nrWrapper(){try{var n,a=u(arguments),d=this,f=r&&r(a,d)||{}}catch(c){i([c,"",[a,d,s],f])}o(e+"start",[a,d,s],f);try{return n=t.apply(d,a)}catch(p){throw o(e+"err",[a,d,p],f),p}finally{o(e+"end",[a,d,n],f)}}return a(t)?t:(e||(e=""),nrWrapper[n.flag]=!0,nrWrapper)}function r(t,e,r,o){r||(r="");var i,s,u,d="-"===r.charAt(0);for(u=0;u<e.length;u++)s=e[u],i=t[s],a(i)||(t[s]=n(i,d?s+r:r,o,s,t))}function o(t,e,n){try{s.emit(t,e,n)}catch(r){i([r,t,e,n])}}function i(t){try{s.emit("internal-error",t)}catch(e){}}function a(t){return!(t&&"function"==typeof t&&t.apply&&!t[n.flag])}var s=t(1),u=t(2);e.exports=n,n.inPlace=r,n.flag="nr@wrapper"},{1:1,2:14}]},{},["G9z0Bl",2,7]);</script></head>
<body data-slug="Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist" contextmenu="edit-history-menu" class="document  ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

                    (function(){
  var FLAGS = {
    'derby_closed': true,'ga_outbound_links': true,'kumaediting': false,'page_move': false,'promote_script': false,'redirect_messages': false,'top_contributors': false,'wiki_spellcheck': false
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'render_stale_documents_async': true,'enable_optimizely': false
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

                
        // This represents the site configuration
        win.mdn = {
            build: '9fd3034',
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to media (images, CSS, JS) in MDN
            mediaPath: 'https://developer.cdn.mozilla.net/media/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            },
        };

        // Ensures gettext always returns something, is always set
        win.gettext = function(x) {
            return x;
        }
    })(window);
</script>
  

  
  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
          <li><a href="#q" id="skip-search">Skip to search</a></li>
      </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div class="clear header-login">
      <a href="http://www.mozilla.org/" id="tabzilla" class="no-track">mozilla</a>
                <script src="../../../../../../../../login.persona.org/include.js"></script>
<script type="text/javascript">
(function() {
  var allauth = window.allauth = window.allauth || {};

  function startWatching() {
    navigator.id.watch({
      onlogin: function(assertion) {
        // TODO: next url handling
        document.getElementById("_persona_assertion").value = assertion;
        document.getElementById("_persona_login").submit();
      },
      onlogout: function() {
        // TODO
      }
    })
  };

  allauth.persona = {
    login: function(nextUrl, process) {
        document.getElementById("_persona_next_url").value = nextUrl || '';
        document.getElementById("_persona_process").value = process;
        startWatching();
        navigator.id.request({"siteName": "Mozilla Developer Network", "siteLogo": "/media/redesign/img/opengraph-logo.png"});
    }
  }
})();
</script>

<form id="_persona_login" method="post" action="https://developer.mozilla.org/users/persona/login/">
  <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='OFUZvWX3cvltHNznKujHNL8vtsBRoNMa' /></div>
  <input type="hidden" name="next" value="" id="_persona_next_url"/>
  <input type="hidden" name="process" value="" id="_persona_process"/>
  <input type="hidden" name="assertion" id="_persona_assertion"/>
</form>

  <form>
      <div class="oauth-login-container" tabIndex="0">
          <div class="oauth-login-options">
              <span>Sign in with</span>
              <span class="oauth-icon oauth-persona" title="Sign in with Persona"><i class="icon-user" aria-hidden="true"></i></span>
                      </div>
          <div class="submenu oauth-login-picker" aria-hidden="true">
              <ul>
                  <li><a href="javascript:allauth.persona.login('/en\u002DUS/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist', 'login')" class="persona-button persona-loaded login-link" data-next="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist" data-service="Persona"><i class="icon-user" aria-hidden="true"></i>Persona</a></li>
                              </ul>
          </div>
      </div>
  </form>
          </div>

    <a href="https://developer.mozilla.org/en-US/" class="logo">Mozilla Developer Network</a>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Zones<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-single" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Apps">App Center</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox">Firefox</a></li>
              <li><a href="https://developer.mozilla.org/en-US/Marketplace">Firefox Marketplace</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox_OS">Firefox OS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Persona">Persona</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Platform<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/API">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/Apps">Apps</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References & Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/demos/">Demos</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Tools</a></li><li><a href="https://developer.mozilla.org/en-US/demos/">Demos</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Connect">Connect</a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" data-placeholder="Search" data-value="" value="" />
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  
   <!-- end is_zone -->


    <div class="wiki-main-content" id="document-main"><div class="center">
            <div class="article-meta">
        <!-- action buttons -->
        
        
        

  <ul class="page-buttons" data-sticky="false"><li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-globe"></i></button>

        <div class="submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
                                                <li><bdi><a rel="internal" href="https://developer.mozilla.org/fr/docs/XPCOM_Interface_Reference/nsIWebBrowserPersist" title="nsIWebBrowserPersist">Français</a></bdi></li>
                              
                              <li><a href="https://developer.mozilla.org/en-US/users/signin/?next=/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist%24locales">Add a translation</a></li>
                          </ul>
          </div>
        </div></li><li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/users/signin/?next=/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist%24edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li><li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>

        <div class="submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="nsIWebBrowserPersist%24history.html">History</a></li>
                                                                
                
                                
                                                                <li class="page-print"><a href="#" onclick="return window.print();"  title="Print page">Print this page</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
          <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla" rel="v:url" property="v:title">Mozilla</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech" rel="v:url" property="v:title">Mozilla technologies</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM" rel="v:url" property="v:title">XPCOM</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference" rel="v:url" property="v:title">XPCOM reference</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="../Interface.html" rel="v:url" property="v:title">XPCOM Interface Reference</a></li>
        <li class="crumb" typeof="v:Breadcrumb" property="v:title">nsIWebBrowserPersist</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>
        <h1>nsIWebBrowserPersist</h1>
        
      </div>
      
      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-closed wiki-left-none">

          
          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

                          <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
                            <!-- table of contents -->
              <div id="toc" class="toc toggleable">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <code></code><code></code><code></code><code></code><li><a href="#Method_overview" rel="internal">Method overview</a><code></code><code></code><code></code><code></code><code></code><li><a href="#Attributes" rel="internal">Attributes</a><code></code><code></code><code></code><code></code><code></code><code><code></code></code><code></code><code></code><code></code><code></code><li><a href="#Constants" rel="internal">Constants</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#Methods" rel="internal">Methods</a><ol><li><a href="#cancelSave()" rel="internal">cancelSave()</a><li><a href="#saveChannel()" rel="internal">saveChannel()</a><code></code><code></code><code></code><code></code><code></code><li><a href="#saveDocument()" rel="internal">saveDocument()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#saveURI()" rel="internal">saveURI()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#saveURI()" rel="internal">savePrivacyAwareURI()</a><code></code><code></code></ol></li><li><a href="#Example" rel="internal">Example</a><li><a href="#See_also" rel="internal">See also</a><code></code>
                </ol>
              </div>
                            </div>
            
                                                  
            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              
              
                                                                                          
              <!-- just the article content -->
              <article id="wikiArticle">
                                                      <p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;"> 
<div style="background: #eee; padding: 2px;"><code><a class="external" href="http://mxr.mozilla.org/mozilla-central/source/embedding/components/webbrowserpersist/public/nsIWebBrowserPersist.idl" rel="custom">embedding/components/webbrowserpersist/public/nsIWebBrowserPersist.idl</a></code><span style="text-align: right; float: right;"><a href="en-US/docs/Interfaces/About_Scriptable_Interfaces.html" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div> 
<span style="padding: 4px 2px;"> 
 
Interface for persisting DOM documents and URIs to local or remote storage. 
</span> 
 
<div style="background: #eee; padding: 2px;"> 
Inherits from: <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsICancelable" title="">nsICancelable</a></code> 
<span style="text-align: right; float: right;">Last changed in Gecko 1.9.2 (Firefox 3.6 / Thunderbird 3.1 / Fennec 1.0)</span></div> 
</div><p></p>
<p>Implemented by: <code>@mozilla.org/embedding/browser/nsWebBrowser;1</code> and <code>@mozilla.org/embedding/browser/nsWebBrowserPersist;1</code>. To create an instance, use:</p>
<pre class="eval">var webBrowserPersist = Components.classes["@mozilla.org/embedding/browser/nsWebBrowserPersist;1"]
                        .createInstance(Components.interfaces.nsIWebBrowserPersist);
</pre>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td><code>void <a href="#cancelSave()">cancelSave</a>();</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#saveChannel()">saveChannel</a>(in nsIChannel aChannel, in nsISupports aFile);</code> </td>
  </tr>
  <tr>
   <td><code>void <a href="#saveDocument()">saveDocument</a>(in nsIDOMDocument aDocument, in nsISupports aFile, in nsISupports aDataPath, in string aOutputContentType, in unsigned long aEncodingFlags, in unsigned long aWrapColumn);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#saveURI()">saveURI</a>(in nsIURI aURI, in nsISupports aCacheKey, in nsIURI aReferrer, in nsIInputStream aPostData, in string aExtraHeaders, in nsISupports aFile, in nsILoadContext aPrivacyContext);</code></td>
  </tr>
  <tr>
   <td><code>void <a href="#saveURI()">savePrivacyAwareURI</a>(in nsIURI aURI, in nsISupports aCacheKey, in nsIURI aReferrer, in nsIInputStream aPostData, in string aExtraHeaders, in nsISupports aFile, in boolean aIsPrivate);</code></td>
  </tr>
 </tbody>
</table>
<h2 id="Attributes" name="Attributes">Attributes</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Attribute</td>
   <td class="header">Type</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>currentState</code></td>
   <td><code><a href="https://developer.mozilla.org/en/unsigned_long" title="en/unsigned long">unsigned long</a></code></td>
   <td>Current state of the persister object. <strong>Read only.</strong></td>
  </tr>
  <tr>
   <td><code>persistFlags</code></td>
   <td><code><a href="https://developer.mozilla.org/en/unsigned_long" title="en/unsigned long">unsigned long</a></code></td>
   <td>Flags governing how data is fetched and saved from the network. It is best to set this value explicitly unless you are prepared to accept the default values.</td>
  </tr>
  <tr>
   <td><code>progressListener</code></td>
   <td><code><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebProgressListener" title="">nsIWebProgressListener</a></code></code></td>
   <td>Callback listener for progress notifications. The object that the embbedder supplies may also implement <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIInterfaceRequestor" title="">nsIInterfaceRequestor</a></code> and be prepared to return <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAuthPrompt" title="">nsIAuthPrompt</a></code> or other interfaces that may be required to download data.</td>
  </tr>
  <tr>
   <td><code>result</code></td>
   <td><code><a href="https://developer.mozilla.org/en/unsigned_long" title="en/unsigned long">unsigned long</a></code></td>
   <td>Value indicating the success or failure of the persist operation. <strong>Read only.</strong></td>
  </tr>
 </tbody>
</table>
<h2 id="Constants" name="Constants">Constants</h2>
<table class="standard-table">
 <tbody>
  <tr>
   <td class="header">Constant</td>
   <td class="header">Value</td>
   <td class="header">Description</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_NONE</code></td>
   <td><code>0</code></td>
   <td>No special persistence behavior.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_FROM_CACHE</code></td>
   <td><code>1</code></td>
   <td>Only use cached data (could <code>result</code> in failure if data is not cached).</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_BYPASS_CACHE</code></td>
   <td><code>2</code></td>
   <td>Bypass the cached data.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_IGNORE_REDIRECTED_DATA</code></td>
   <td><code>4</code></td>
   <td>Ignore any redirected data (usually adverts).</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_IGNORE_IFRAMES</code></td>
   <td><code>8</code></td>
   <td>Ignore iframe content (usually adverts).</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_NO_CONVERSION</code></td>
   <td><code>16</code></td>
   <td>Do not run the incoming data through a content converter for example to decompress it.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_REPLACE_EXISTING_FILES</code></td>
   <td><code>32</code></td>
   <td>Replace existing files on the disk (use with due diligence!)</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_NO_BASE_TAG_MODIFICATIONS</code></td>
   <td><code>64</code></td>
   <td>Don't modify or add base tags.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_FIXUP_ORIGINAL_DOM</code></td>
   <td><code>128</code></td>
   <td>Make changes to original DOM rather than cloning nodes.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_FIXUP_LINKS_TO_DESTINATION</code></td>
   <td><code>256</code></td>
   <td>Fix links relative to destination location (not origin)</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_DONT_FIXUP_LINKS</code></td>
   <td><code>512</code></td>
   <td>Do not make any adjustments to links.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_SERIALIZE_OUTPUT</code></td>
   <td><code>1024</code></td>
   <td>Force serialization of output (one file at a time; not concurrent)</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_DONT_CHANGE_FILENAMES</code></td>
   <td><code>2048</code></td>
   <td>Don't make any adjustments to filenames.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_FAIL_ON_BROKEN_LINKS</code></td>
   <td><code>4096</code></td>
   <td>Fail on broken in-line links.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_CLEANUP_ON_FAILURE</code></td>
   <td><code>8192</code></td>
   <td>Automatically cleanup after a failed or cancelled operation, deleting all created files and directories. This flag does nothing for failed upload operations to remote servers.</td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_AUTODETECT_APPLY_CONVERSION</code></td>
   <td><code>16384</code></td>
   <td>Let the WebBrowserPersist decide whether the incoming data is encoded and whether it needs to go through a content converter, for example to decompress it. </td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_APPEND_TO_FILE</code></td>
   <td><code>32768</code></td>
   <td>Append the downloaded data to the target file. This can only be used when persisting to a local file. </td>
  </tr>
  <tr>
   <td><code>PERSIST_FLAGS_FORCE_ALLOW_COOKIES</code></td>
   <td><code>65536</code></td>
   <td>Force relevant cookies to be sent with this load even if normally they wouldn't be. </td>
  </tr>
  <tr>
   <td><code>PERSIST_STATE_READY</code></td>
   <td><code>1</code></td>
   <td>Persister is ready to save data.</td>
  </tr>
  <tr>
   <td><code>PERSIST_STATE_SAVING</code></td>
   <td><code>2</code></td>
   <td>Persister is saving data.</td>
  </tr>
  <tr>
   <td><code>PERSIST_STATE_FINISHED</code></td>
   <td><code>3</code></td>
   <td>Persister has finished saving data.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_SELECTION_ONLY</code></td>
   <td><code>1</code></td>
   <td>Output only the current selection as opposed to the whole document.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_FORMATTED</code></td>
   <td><code>2</code></td>
   <td>For plain text output. Convert html to plain text that looks like the html. Implies wrap (except inside &lt;pre&gt;), since html wraps. HTML output: always do prettyprinting, ignoring existing formatting.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_RAW</code></td>
   <td><code>4</code></td>
   <td>Output without formatting or wrapping the content. This flag may be used to preserve the original formatting as much as possible.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_BODY_ONLY</code></td>
   <td><code>8</code></td>
   <td>Output only the body section, no HTML tags.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_PREFORMATTED</code></td>
   <td><code>16</code></td>
   <td>Wrap even if when not doing formatted output (for example for text fields).</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_WRAP</code></td>
   <td><code>32</code></td>
   <td>Wrap documents at the specified column.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_FORMAT_FLOWED</code></td>
   <td><code>64</code></td>
   <td>For plain text output. Output for format flowed (RFC 2646). This is used when converting to text for mail sending. This differs just slightly but in an important way from normal formatted, and that is that lines are space stuffed. This can't (correctly) be done later.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_ABSOLUTE_LINKS</code></td>
   <td><code>128</code></td>
   <td>Convert links to absolute links where possible.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_ENCODE_W3C_ENTITIES</code></td>
   <td><code>256</code></td>
   <td>Attempt to encode entities standardized at W3C (HTML, MathML, and so on.). This is a catch-all flag for documents with mixed contents. Beware of interoperability issues. See below for other flags which might likely do what you want.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_CR_LINEBREAKS</code></td>
   <td><code>512</code></td>
   <td>Output with carriage return line breaks. May also be combined with <code>ENCODE_FLAGS_LF_LINEBREAKS</code> and if neither is specified, the platform default format is used.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_LF_LINEBREAKS</code></td>
   <td><code>1024</code></td>
   <td>Output with linefeed line breaks. May also be combined with <code>ENCODE_FLAGS_CR_LINEBREAKS</code> and if neither is specified, the platform default format is used.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_NOSCRIPT_CONTENT</code></td>
   <td><code>2048</code></td>
   <td>For plain text output. Output the content of noscript elements.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_NOFRAMES_CONTENT</code></td>
   <td><code>4096</code></td>
   <td>For plain text output. Output the content of noframes elements.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_ENCODE_BASIC_ENTITIES</code></td>
   <td><code>8192</code></td>
   <td>Encode basic entities, for example output   instead of character code 0xa0. The basic set is just   &amp; &lt; &gt; " for interoperability with older products that don't support α and friends.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_ENCODE_LATIN1_ENTITIES</code></td>
   <td><code>16384</code></td>
   <td>Encode Latin1 entities. This includes the basic set and accented letters between 128 and 255.</td>
  </tr>
  <tr>
   <td><code>ENCODE_FLAGS_ENCODE_HTML_ENTITIES</code></td>
   <td><code>32768</code></td>
   <td>Encode HTML4 entities. This includes the basic set, accented letters, Greek letters and certain special markup symbols.</td>
  </tr>
 </tbody>
</table>
<h2 id="Methods" name="Methods">Methods</h2>
<h3 id="cancelSave()" name="cancelSave()">cancelSave()</h3>
<p>Cancels the current operation. The caller is responsible for cleaning up partially written files or directories. This has the same effect as calling cancel with an argument of NS_BINDING_ABORTED.</p>
<pre class="eval">void cancelSave();
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<p>None.</p>
<p></p><div> 
    <span class="indicatorInHeadline standardNote standardNoteMethod">Requires Gecko 1.8 (Firefox 1.5 / Thunderbird 1.5 / SeaMonkey 1.0)</span> 
    <h3 id="saveChannel()" name="saveChannel()">saveChannel()</h3> 
</div><p></p>
<p>Save a channel to a file. It must not be opened yet.</p>
<pre class="eval">void saveChannel(
  in nsIChannel aChannel,
  in nsISupports aFile
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aChannel</code></dt>
 <dd>
  The <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChannel" title="">nsIChannel</a></code> to save to a file.</dd>
 <dt>
  <code>aFile</code></dt>
 <dd>
  Target local file. This may be a <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsILocalFile" title="">nsILocalFile</a></code> object or an <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> object with a file scheme.</dd>
</dl>
<h3 id="saveDocument()" name="saveDocument()">saveDocument()</h3>
<p>Save the specified DOM document to file and optionally all linked files (for example images, CSS, JS &amp; subframes). Do not call this method until the document has finished loading!</p>
<pre class="eval">void saveDocument(
  in nsIDOMDocument aDocument,
  in nsISupports aFile,
  in nsISupports aDataPath,
  in string aOutputContentType,
  in unsigned long aEncodingFlags,
  in unsigned long aWrapColumn
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aDocument</code></dt>
 <dd>
  Document to save to file. Some implementations of this interface may also support <code>nsnull</code> to imply the currently loaded document.</dd>
 <dt>
  <code>aFile</code></dt>
 <dd>
  Target local file. This may be a <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsILocalFile" title="">nsILocalFile</a></code> object or an <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> object with a file scheme or a scheme that supports uploading (for example ftp).</dd>
 <dt>
  <code>aDataPath</code></dt>
 <dd>
  Path to directory where URIs linked to the document are saved or <code>nsnull</code> if no linked URIs should be saved. This may be a <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsILocalFile" title="">nsILocalFile</a></code> object or an <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> object with a file scheme.</dd>
 <dt>
  <code>aOutputContentType</code></dt>
 <dd>
  The desired MIME type format to save the document and all sub-documents into or <code>nsnull</code> to use the default behavior.</dd>
 <dt>
  <code>aEncodingFlags</code></dt>
 <dd>
  Flags to pass to the encoder.</dd>
 <dt>
  <code>aWrapColumn</code></dt>
 <dd>
  For text documents, indicates the desired width to wrap text at. Parameter is ignored if wrapping is not specified by the encoding flags.</dd>
</dl>
<h6 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h6>
<dl>
 <dt>
  <code>NS_ERROR_INVALID_ARG</code></dt>
 <dd>
  One or more arguments was invalid.</dd>
</dl>
<h3 id="saveURI()" name="saveURI()">saveURI()</h3>
<p>Save the specified URI to file.</p>
<pre class="eval">void saveURI(
  in nsIURI aURI,
  in nsISupports aCacheKey,
  in nsIURI aReferrer,
  in nsIInputStream aPostData,
  in string aExtraHeaders,
  in nsISupports aFile,
  in nsILoadContext aPrivacyContext
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
 <dt>
  <code>aURI</code></dt>
 <dd>
  URI to save to file. Some implementations of this interface may also support <code>nsnull</code> to imply the currently loaded URI.</dd>
 <dt>
  <code>aCacheKey</code></dt>
 <dd>
  An object representing the URI in the cache or <code>nsnull</code>. This can be a necko cache key, an <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebPageDescriptor" title="">nsIWebPageDescriptor</a></code>, or the currentDescriptor of an <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebPageDescriptor" title="">nsIWebPageDescriptor</a></code>.</dd>
 <dt>
  <code>aReferrer</code></dt>
 <dd>
  The referrer URI to pass with an HTTP request or <code>nsnull</code>.</dd>
 <dt>
  <code>aPostData</code></dt>
 <dd>
  Post data to pass with an HTTP request or <code>nsnull</code>.</dd>
 <dt>
  <code>aExtraHeaders</code></dt>
 <dd>
  Additional headers to supply with an HTTP request or <code>nsnull</code>.</dd>
 <dt>
  <code>aFile</code></dt>
 <dd>
  Target file. This may be a <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsILocalFile" title="">nsILocalFile</a></code> object or an <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> object with a file scheme or a scheme that supports uploading (for example ftp).</dd>
 <dt>
  <code>aPrivacyContext</code></dt>
 <dd>
  A context derived from a relevant window or document (eg. the window containing a link being saved) via a docshell that QIs to nsILoadContext. Used to ensure that privacy-sensitive operations (such as saving a URI related to a private browsing session) do not leak any information (eg. cookies, permanent cache, etc.) Null must <em>only</em> be passed in the event that no such relevant context exists (ie. the URI being saved is unrelated to any current browsing session).
  <p><strong>Important:</strong> If you think that you should be passing <code>null</code> here, you are almost certainly wrong. <code>null</code> should be passed <em>only when no plausible privacy context exists</em> for the URI to be saved, which is an exceedingly rare corner case.</p>
 </dd>
</dl>
<h6 id="Exceptions_thrown" name="Exceptions_thrown">Exceptions thrown</h6>
<dl>
 <dt>
  <code>NS_ERROR_INVALID_ARG</code></dt>
 <dd>
  One or more arguments was invalid.</dd>
</dl>
<h3 id="saveURI()" name="saveURI()">savePrivacyAwareURI()</h3>
<p>Save the specified URI to file, explicitly dictating whether the operation should be considered private for the purposes of network requests, caching, etc. All arguments and exceptions are identical to <code>saveURI</code>, with the exception of <code>aIsPrivate</code> which is used to indicate the private nature of the operation.</p>
<h2 id="Example" name="Example">Example</h2>
<pre class="brush: js">function downloadFile(httpLoc, sourceWindow) {
  try {
    //new obj_URI object
    var obj_URI = Components.classes["@mozilla.org/network/io-service;1"].getService(Components.interfaces.nsIIOService).newURI(httpLoc, null, null);

    //new file object
    var obj_TargetFile = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);

    //set file with path
    obj_TargetFile.initWithPath("c:\\temp\\test.pdf");
    //if file doesn't exist, create
    if(!obj_TargetFile.exists()) {
      obj_TargetFile.create(0x00,0644);
    }

    //new persistence object
    var obj_Persist = Components.classes["@mozilla.org/embedding/browser/nsWebBrowserPersist;1"].createInstance(Components.interfaces.nsIWebBrowserPersist);

    // with persist flags if desired
    const nsIWBP = Components.interfaces.nsIWebBrowserPersist;
    const flags = nsIWBP.PERSIST_FLAGS_REPLACE_EXISTING_FILES;
    obj_Persist.persistFlags = flags | nsIWBP.PERSIST_FLAGS_FROM_CACHE;

    var privacyContext = sourceWindow.QueryInterface(Components.interfaces.nsIInterfaceRequestor)
                                     .getInterface(Components.interfaces.nsIWebNavigation)
                                     .QueryInterface(Components.interfaces.nsILoadContext);

    //save file to target
    obj_Persist.saveURI(obj_URI,null,null,null,null,obj_TargetFile,privacyContext);
  } catch (e) {
    alert(e);
  }
}
</pre>
<h2 id="See_also" name="See_also">See also</h2>
<ul>
 <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsICancelable" title="">nsICancelable</a></code></li>
</ul>
                                                </article>

              
                <!-- attachments list -->
                
                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                                                      <!-- tags if present -->
                  <div class="tag-attach-list tags contributor-sub">
                    <i aria-hidden="true" class="icon-tags"></i><strong>Tags:</strong>
                    <ul class="tag-list"><li><a href="https://developer.mozilla.org/en-US/docs/tag/needsattention">needsattention</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM">XPCOM</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Interfaces">Interfaces</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM API Reference">XPCOM API Reference</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM Interface Reference">XPCOM Interface Reference</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Interfaces:Scriptable">Interfaces:Scriptable</a></li></ul>
                  </div>
                                    <div class="contributor-sub"> <i aria-hidden="true" class="icon-group"></i><strong>Contributors to this page:</strong> <a href="https://developer.mozilla.org/en-US/profiles/The Hunter">The Hunter</a>, <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/GijsKruitbosch">GijsKruitbosch</a>, <a href="https://developer.mozilla.org/en-US/profiles/Max1million">Max1million</a>, <a href="https://developer.mozilla.org/en-US/profiles/hle.ogr">hle.ogr</a>, <a href="https://developer.mozilla.org/en-US/profiles/weelillad">weelillad</a>, <a href="https://developer.mozilla.org/en-US/profiles/theazureshadow">theazureshadow</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/jdm">jdm</a>, <a href="https://developer.mozilla.org/en-US/profiles/kmaglione">kmaglione</a>, <a href="https://developer.mozilla.org/en-US/profiles/Wjjohnst">Wjjohnst</a>, <a href="https://developer.mozilla.org/en-US/profiles/Dafi">Dafi</a>, <a href="https://developer.mozilla.org/en-US/profiles/michaelweghorn">michaelweghorn</a> </div>                                      <div class="contributor-sub">
                      <i aria-hidden="true" class="icon-clock-o"></i><strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>,
                      <time datetime="2014-04-14T10:43:15-07:00">Apr 14, 2014 10:43:15 AM</time>
                    </div>
                                  </div>
                          </div>

                      </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="$edit" label="Edit page"></menuitem>
    <menuitem data-action="$history" label="View page history"></menuitem>
  </menu>
  </div></main>

  <!-- Footer -->
  <footer><div class="center">
    <div class="column-container">
      <div class="column-main">
                <p>
          <bdi>&copy; 2005-2014 Mozilla Developer Network and individual contributors<br /> Content is available under <a href="https://developer.mozilla.org/en-US/docs/Project:MDN/About#Copyrights_and_licenses">these licenses</a> &middot; <a href="https://developer.mozilla.org/en-US/docs/Project:MDN/About">About MDN</a> &middot; <a href="http://github.com/mozilla/kuma">Contribute to the code</a> &middot; <a href="http://www.mozilla.org/privacy/websites/">Privacy policy</a></bdi>        </p>
              </div>
      <div class="column-strip">
                        <form class="languages go" method="get" action="https://developer.mozilla.org/en-US/docs/Web">
      <label for="language">Other languages:</label>
      <select id="language" class="wiki-l10n" name="next" dir="ltr">
        <option value="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist" selected>
          English (US)
        </option>
                  <option value="/fr/docs/XPCOM_Interface_Reference/nsIWebBrowserPersist">
            Français
          </option>      </select>
      <noscript><button type="submit">Go</button></noscript>
    </form>
                </div>
    </div>
  </div></footer>

  <!-- site js -->
    <script src="https://developer.mozilla.org/en-US/jsi18n/build:9fd3034"></script>
  
      <!--[if lte IE 8]><script src="/media/redesign/js/libs/selectivizr-1.0.2/selectivizr-build.js?build=9fd3034"></script><![endif]-->

    <script src="../../../../../../../../developer.cdn.mozilla.net/media/js/main-min46d5.js?build=9fd3034"></script>

          <script>
        mdn.analytics.trackOutboundLinks(document.body);
      </script>
    
          <script src="../../../../../../../../developer.cdn.mozilla.net/media/js/wiki-min46d5.js?build=9fd3034"></script>
      
    <script type="text/javascript">
      jQuery('.from-search-toc').mozSearchResults('');
  </script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"beacon-3.newrelic.com","queueTime":1,"licenseKey":"42869b6ed3","agent":"js-agent.newrelic.com/nr-411.min.js","transactionName":"b1QHMUtVDRdSW0YKXVYeIxBXVxcNXFYdFFtTWEsTUFEUFwlcXQBHVVQLEQ==","applicationID":"3172075","errorBeacon":"bam.nr-data.net","applicationTime":277}</script></body>

<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIWebBrowserPersist by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Aug 2014 20:27:33 GMT -->
</html>