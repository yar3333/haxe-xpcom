<!DOCTYPE html>
<html lang="en-US" dir="ltr" class="redesign no-js">

<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Aug 2014 20:10:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <script>(function(d) { d.className = d.className.replace(/\bno-js/, ''); })(document.documentElement);</script>
        
    <title>nsIAnnotationService - Mozilla | MDN</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
  <link rel="home" href="https://developer.mozilla.org/en-US/">
  <link rel="copyright" href="#copyright">

  <link href="../../../../../../../../mozorg.cdn.mozilla.net/media/css/tabzilla-min.css" type="text/css" rel="stylesheet">
              <link rel="stylesheet" media="all" href="../../../../../../../../developer.cdn.mozilla.net/media/css/mdn-min46d5.css?build=9fd3034" />

      
    <link rel="stylesheet" media="all" href="../../../../../../../../developer.cdn.mozilla.net/media/css/wiki-min46d5.css?build=9fd3034" />

          <link rel="stylesheet" type="text/css"
            href="https://developer.mozilla.org/en-US/docs/Template:CustomCSS?raw=1" />
    
    
  <!-- common social tags -->
    <meta property="og:type" content="website">
  <meta property="og:image" content="https://developer.mozilla.org/media/redesign/img/opengraph-logo.png">
  <meta property="og:site_name" content="Mozilla Developer Network">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://developer.mozilla.org/media/redesign/img/opengraph-logo.png">
  <meta name="twitter:site" content="@NewOnMDN">
  <meta name="twitter:creator" content="@NewOnMDN">

  <link rel="search" type="application/opensearchdescription+xml" href="https://developer.mozilla.org/en-US/search/xml" title="Mozilla Developer Network">

  <!-- third-generation iPad with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon144.png">
  <!-- iPhone with high-resolution Retina display: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon114.png">
  <!-- first- and second-generation iPad: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon72.png">
  <!-- non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon57.png">
  <!-- basic favicon -->
          <link rel="shortcut icon" href="../../../../../../../../developer.cdn.mozilla.net/media/redesign/img/favicon32.png">
  <!--[if IE]>
  <meta http-equiv="imagetoolbar" content="no">
  <script src="https://developer.cdn.mozilla.net/media/js/libs/html5.js"></script>
  <![endif]-->

    <link rel="alternate" type="application/json" href="nsIAnnotationService%24json.json">
  <link rel="canonical" href="nsIAnnotationService.html" >

  
  <!-- document-specific social tags -->
  <meta property="og:title" content="nsIAnnotationService">
  <meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService">
  <meta name="twitter:url" content="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService">
  <meta name="twitter:title" content="nsIAnnotationService">
    <meta property="og:description" content="Implemented by: &#34;@mozilla.org/browser/annotation-service;1&#34;. To use this service, use:">
  <meta name="description" content="Implemented by: &#34;@mozilla.org/browser/annotation-service;1&#34;. To use this service, use:">
  <meta name="twitter:description" content="Implemented by: &#34;@mozilla.org/browser/annotation-service;1&#34;. To use this service, use:">
  
      <script type="text/javascript">

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','../../../../../../../../www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-36116321-5', 'mozilla.org');
    ga('set', 'anonymizeIp', true);

    
    
    
    (function() {
        // http://cfsimplicity.com/61/removing-analytics-clutter-from-campaign-urls
        var win = window;
        var removeUtms = function(){
            var location = win.location;
            if (location.hash.indexOf('utm') != -1) {
                var anchor = location.hash.match(/#(?!utm)[^&]+/);
                anchor = anchor ? anchor[0] : '';
                if(!anchor && win.history.replaceState){
                    history.replaceState({}, '', location.pathname + location.search);
                } else {
                    location.hash = anchor;
                }
            }
        };

        ga('send', 'pageview', removeUtms(win.location + ''));
    })();
</script>
  <script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VgAEV1RTGwABU1NSAAQ="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o?o:e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e){function n(t,e,n){n||(n={});for(var r=o[t],a=r&&r.length||0,s=n[i]||(n[i]={}),u=0;a>u;u++)r[u].apply(s,e);return s}function r(t,e){var n=o[t]||(o[t]=[]);n.push(e)}var o={},i="nr@context";e.exports={on:r,emit:n}},{}],2:[function(t){function e(t,e,n,i,s){return u?u-=1:r("err",[s||new UncaughtException(t,e,n)]),"function"==typeof a?a.apply(this,o(arguments)):!1}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function n(t){r("err",[t,(new Date).getTime()])}var r=t("handle"),o=t(6),i=t(5),a=window.onerror,s=!1,u=0;t("loader").features.push("err"),window.onerror=e,NREUM.noticeError=n;try{throw new Error}catch(d){"stack"in d&&(t(1),t(2),"addEventListener"in window&&t(3),window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&t(4),s=!0)}i.on("fn-start",function(){s&&(u+=1)}),i.on("fn-err",function(t,e,r){s&&(this.thrown=!0,n(r))}),i.on("fn-end",function(){s&&!this.thrown&&u>0&&(u-=1)}),i.on("internal-error",function(t){r("ierr",[t,(new Date).getTime(),!0])})},{1:5,2:4,3:3,4:6,5:1,6:14,handle:"D5DuLP",loader:"G9z0Bl"}],3:[function(t){function e(t){r.inPlace(t,["addEventListener","removeEventListener"],"-",n)}function n(t){return t[1]}var r=t(1),o=(t(3),t(2));if(e(window),"getPrototypeOf"in Object){for(var i=document;i&&!i.hasOwnProperty("addEventListener");)i=Object.getPrototypeOf(i);i&&e(i);for(var a=XMLHttpRequest.prototype;a&&!a.hasOwnProperty("addEventListener");)a=Object.getPrototypeOf(a);a&&e(a)}else XMLHttpRequest.prototype.hasOwnProperty("addEventListener")&&e(XMLHttpRequest.prototype);o.on("addEventListener-start",function(t){if(t[1]){var e=t[1];"function"==typeof e?this.wrapped=e["nr@wrapped"]?t[1]=e["nr@wrapped"]:e["nr@wrapped"]=t[1]=r(e,"fn-"):"function"==typeof e.handleEvent&&r.inPlace(e,["handleEvent"],"fn-")}}),o.on("removeEventListener-start",function(t){var e=this.wrapped;e&&(t[1]=e)})},{1:15,2:1,3:14}],4:[function(t){var e=(t(3),t(1)),n=t(2);e.inPlace(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"raf-"),n.on("raf-start",function(t){t[0]=e(t[0],"fn-")})},{1:15,2:1,3:14}],5:[function(t){function e(t){var e=t[0];"string"==typeof e&&(e=new Function(e)),t[0]=n(e,"fn-")}var n=(t(3),t(1)),r=t(2);n.inPlace(window,["setTimeout","setInterval","setImmediate"],"setTimer-"),r.on("setTimer-start",e)},{1:15,2:1,3:14}],6:[function(t){function e(){o.inPlace(this,s,"fn-")}function n(t,e){o.inPlace(e,["onreadystatechange"],"fn-")}function r(t,e){return e}var o=t(1),i=t(2),a=window.XMLHttpRequest,s=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"];window.XMLHttpRequest=function(t){var n=new a(t);try{i.emit("new-xhr",[],n),o.inPlace(n,["addEventListener","removeEventListener"],"-",function(t,e){return e}),n.addEventListener("readystatechange",e,!1)}catch(r){try{i.emit("internal-error",r)}catch(s){}}return n},window.XMLHttpRequest.prototype=a.prototype,o.inPlace(XMLHttpRequest.prototype,["open","send"],"-xhr-",r),i.on("send-xhr-start",n),i.on("open-xhr-start",n)},{1:15,2:1}],7:[function(t){function e(){function e(t){if("string"==typeof t&&t.length)return t.length;if("object"!=typeof t)return void 0;if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if("undefined"!=typeof FormData&&t instanceof FormData)return void 0;try{return JSON.stringify(t).length}catch(e){return void 0}}function n(t){var n=this.params,r=this.metrics;if(!this.ended){this.ended=!0;for(var i=0;u>i;i++)t.removeEventListener(s[i],this.listener,!1);if(!n.aborted){if(r.duration=(new Date).getTime()-this.startTime,4===t.readyState){n.status=t.status;var a=t.responseType,d="arraybuffer"===a||"blob"===a||"json"===a?t.response:t.responseText,f=e(d);if(f&&(r.rxSize=f),this.sameOrigin){var c=t.getResponseHeader("X-NewRelic-App-Data");c&&(n.cat=c.split(", ").pop())}}else n.status=0;r.cbTime=this.cbTime,o("xhr",[n,r])}}}function r(t,e){var n=i(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}t("loader").features.push("xhr");var o=t("handle"),i=t(1),a=t(5),s=["load","error","abort","timeout"],u=s.length,d=t(2);t(3),t(4),a.on("new-xhr",function(){this.totalCbs=0,this.called=0,this.cbTime=0,this.end=n,this.ended=!1,this.xhrGuids={}}),a.on("open-xhr-start",function(t){this.params={method:t[0]},r(this,t[1]),this.metrics={}}),a.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),a.on("send-xhr-start",function(t,n){var r=this.metrics,o=t[0],i=this;if(r&&o){var d=e(o);d&&(r.txSize=d)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(i.params.aborted=!0),("load"!==t.type||i.called===i.totalCbs&&(i.onloadCalled||"function"!=typeof n.onload))&&i.end(n)}catch(e){try{a.emit("internal-error",e)}catch(r){}}};for(var f=0;u>f;f++)n.addEventListener(s[f],this.listener,!1)}),a.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),a.on("xhr-load-added",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),a.on("xhr-load-removed",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),a.on("addEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-added",[t[1],t[2]],e)}),a.on("removeEventListener-end",function(t,e){e instanceof XMLHttpRequest&&"load"===t[0]&&a.emit("xhr-load-removed",[t[1],t[2]],e)}),a.on("fn-start",function(t,e,n){e instanceof XMLHttpRequest&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),a.on("fn-end",function(t,e){this.xhrCbStart&&a.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent)&&e()},{1:8,2:11,3:3,4:6,5:1,handle:"D5DuLP",loader:"G9z0Bl"}],8:[function(t,e){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");return!r.port&&o[1]&&(r.port=o[1].split("https://developer.mozilla.org/")[0].split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname),r.sameOrigin=!e.hostname||e.hostname===document.domain&&e.port===n.port&&e.protocol===n.protocol,r}},{}],handle:[function(t,e){e.exports=t("D5DuLP")},{}],D5DuLP:[function(t,e){function n(t,e){var n=r[t];return n?n.apply(this,e):(o[t]||(o[t]=[]),void o[t].push(e))}var r={},o={};e.exports=n,n.queues=o,n.handlers=r},{}],11:[function(t,e){function n(t){if(!t||"object"!=typeof t&&"function"!=typeof t)return-1;if(t===window)return 0;if(o.call(t,"__nr"))return t.__nr;try{return Object.defineProperty(t,"__nr",{value:r,writable:!0,enumerable:!1}),r}catch(e){return t.__nr=r,r}finally{r+=1}}var r=1,o=Object.prototype.hasOwnProperty;e.exports=n},{}],loader:[function(t,e){e.exports=t("G9z0Bl")},{}],G9z0Bl:[function(t,e){function n(){var t=p.info=NREUM.info;if(t&&t.agent&&t.licenseKey&&t.applicationID&&u&&u.body){p.proto="https"===c.split(":")[0]||t.sslForHttp?"https://":"http://",a("mark",["onload",i()]);var e=u.createElement("script");e.src=p.proto+t.agent,u.body.appendChild(e)}}function r(){"complete"===u.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=t("handle"),s=window,u=s.document,d="addEventListener",f="attachEvent",c=(""+location).split("?")[0],p=e.exports={offset:i(),origin:c,features:[]};u[d]?(u[d]("DOMContentLoaded",o,!1),s[d]("load",n,!1)):(u[f]("onreadystatechange",r),s[f]("onload",n)),a("mark",["firstbyte",i()])},{handle:"D5DuLP"}],14:[function(t,e){function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=n},{}],15:[function(t,e){function n(t,e,r,s){function nrWrapper(){try{var n,a=u(arguments),d=this,f=r&&r(a,d)||{}}catch(c){i([c,"",[a,d,s],f])}o(e+"start",[a,d,s],f);try{return n=t.apply(d,a)}catch(p){throw o(e+"err",[a,d,p],f),p}finally{o(e+"end",[a,d,n],f)}}return a(t)?t:(e||(e=""),nrWrapper[n.flag]=!0,nrWrapper)}function r(t,e,r,o){r||(r="");var i,s,u,d="-"===r.charAt(0);for(u=0;u<e.length;u++)s=e[u],i=t[s],a(i)||(t[s]=n(i,d?s+r:r,o,s,t))}function o(t,e,n){try{s.emit(t,e,n)}catch(r){i([r,t,e,n])}}function i(t){try{s.emit("internal-error",t)}catch(e){}}function a(t){return!(t&&"function"==typeof t&&t.apply&&!t[n.flag])}var s=t(1),u=t(2);e.exports=n,n.inPlace=r,n.flag="nr@wrapper"},{1:1,2:14}]},{},["G9z0Bl",2,7]);</script></head>
<body data-slug="Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService" contextmenu="edit-history-menu" class="document  ">

  <script type="text/javascript">
    (function(win) {
        'use strict';

                    (function(){
  var FLAGS = {
    'derby_closed': true,'ga_outbound_links': true,'kumaediting': false,'page_move': false,'promote_script': false,'redirect_messages': false,'top_contributors': false,'wiki_spellcheck': false
    },
    SWITCHES = {
    'wiki_error_on_delete': false,'wiki_force_immediate_rendering': false,'render_stale_documents_async': true,'enable_optimizely': false
    },
    SAMPLES = {
    
    };
  window.waffle = {
    "flag_is_active": function waffle_flag(flag_name) {
      
      return !!FLAGS[flag_name];
    },
    "switch_is_active": function waffle_switch(switch_name) {
      
      return !!SWITCHES[switch_name];
    },
    "sample_is_active": function waffle_sample(sample_name) {
      
      return !!SAMPLES[sample_name];
    },
    "FLAGS": FLAGS,
    "SWITCHES": SWITCHES,
    "SAMPLES": SAMPLES
  };
})();

                
        // This represents the site configuration
        win.mdn = {
            build: '9fd3034',
            // Properties and settings for CKEditor will go here
            ckeditor: {},
            // Feature test results and methods will be placed here
            features: {},
            // The path to media (images, CSS, JS) in MDN
            mediaPath: 'https://developer.cdn.mozilla.net/media/',
            // Optimizely API
            optimizely: win['optimizely'] || [],
            // Site notifications
            notifications: [],
            
            // Wiki-specific settings will be placed here
            wiki: {
                autosuggestTitleUrl: '/en-US/docs/get-documents'
            },
        };

        // Ensures gettext always returns something, is always set
        win.gettext = function(x) {
            return x;
        }
    })(window);
</script>
  

  
  <ul id="nav-access">
    <li><a href="#document-main" id="skip-main">Skip to main content</a></li>
    <li><a id="skip-language" href="#language">Select language</a></li>
          <li><a href="#q" id="skip-search">Skip to search</a></li>
      </ul>

  <!-- Header -->
  <header id="main-header"><div class="center">

    <div class="clear header-login">
      <a href="http://www.mozilla.org/" id="tabzilla" class="no-track">mozilla</a>
                <script src="../../../../../../../../login.persona.org/include.js"></script>
<script type="text/javascript">
(function() {
  var allauth = window.allauth = window.allauth || {};

  function startWatching() {
    navigator.id.watch({
      onlogin: function(assertion) {
        // TODO: next url handling
        document.getElementById("_persona_assertion").value = assertion;
        document.getElementById("_persona_login").submit();
      },
      onlogout: function() {
        // TODO
      }
    })
  };

  allauth.persona = {
    login: function(nextUrl, process) {
        document.getElementById("_persona_next_url").value = nextUrl || '';
        document.getElementById("_persona_process").value = process;
        startWatching();
        navigator.id.request({"siteName": "Mozilla Developer Network", "siteLogo": "/media/redesign/img/opengraph-logo.png"});
    }
  }
})();
</script>

<form id="_persona_login" method="post" action="https://developer.mozilla.org/users/persona/login/">
  <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='OFUZvWX3cvltHNznKujHNL8vtsBRoNMa' /></div>
  <input type="hidden" name="next" value="" id="_persona_next_url"/>
  <input type="hidden" name="process" value="" id="_persona_process"/>
  <input type="hidden" name="assertion" id="_persona_assertion"/>
</form>

  <form>
      <div class="oauth-login-container" tabIndex="0">
          <div class="oauth-login-options">
              <span>Sign in with</span>
              <span class="oauth-icon oauth-persona" title="Sign in with Persona"><i class="icon-user" aria-hidden="true"></i></span>
                      </div>
          <div class="submenu oauth-login-picker" aria-hidden="true">
              <ul>
                  <li><a href="javascript:allauth.persona.login('/en\u002DUS/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService', 'login')" class="persona-button persona-loaded login-link" data-next="/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService" data-service="Persona"><i class="icon-user" aria-hidden="true"></i>Persona</a></li>
                              </ul>
          </div>
      </div>
  </form>
          </div>

    <a href="https://developer.mozilla.org/en-US/" class="logo">Mozilla Developer Network</a>

    <nav id="main-nav" role="navigation"><ul><li><a href="https://developer.mozilla.org/en-US/docs/Zones">Zones<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu submenu-single" id="nav-zones-submenu">
          <div class="submenu-column">
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/Add-ons">Add-ons</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Apps">App Center</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox">Firefox</a></li>
              <li><a href="https://developer.mozilla.org/en-US/Marketplace">Firefox Marketplace</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Firefox_OS">Firefox OS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Persona">Persona</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Web">Web Platform<i aria-hidden="true" class="icon-caret-down"></i></a>

        <div class="submenu" id="nav-platform-submenu">
          <div class="submenu-column">
            <div class="title">Technologies</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML">HTML</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Graphics">Graphics</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/API">APIs / DOM</a></li>
              <li><a href="https://developer.mozilla.org/en-US/Apps">Apps</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/MathML">MathML</a></li>
            </ul>
          </div><div class="submenu-column last">
            <div class="title">References & Guides</div>
            <ul>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Tutorials">Tutorials</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Reference">References</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide">Developer Guides</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility">Accessibility</a></li>
              <li><a href="https://developer.mozilla.org/en-US/demos/">Demos</a></li>
              <li><a href="https://developer.mozilla.org/en-US/docs/Web">...more docs</a></li>
            </ul>
          </div>
        </div>
      </li><li><a href="https://developer.mozilla.org/en-US/docs/Tools">Tools</a></li><li><a href="https://developer.mozilla.org/en-US/demos/">Demos</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Connect">Connect</a></li><li class="main-nav-search"><form action="https://developer.mozilla.org/en-US/search" method="get" role="search">
        <div class="search-wrap">
          <label for="main-q" class="offscreen">Search</label>
          <input type="search" id="main-q" name="q" data-placeholder="Search" data-value="" value="" />
          <span class="search-trigger"><i aria-hidden="true" class="icon-search"></i></span>&nbsp;
          <button type="submit" class="offscreen">Search</button>
        </div>
      </form></li></ul></nav>
  </div></header>

  <!-- Content will go here -->
  <main id="content"><div class="center clear">
  
   <!-- end is_zone -->


    <div class="wiki-main-content" id="document-main"><div class="center">
            <div class="article-meta">
        <!-- action buttons -->
        
        
        

  <ul class="page-buttons" data-sticky="false"><li><button id="languages-menu" class="transparent" aria-haspopup="true" aria-owns="languages-menu-submenu" aria-expanded="false"><span>Languages</span><i aria-hidden="true" class="icon-globe"></i></button>

        <div class="submenu" id="languages-menu-submenu">
          <div class="submenu-column">
            <ul id="translations">
                              <li class="smaller">No translations exist for this document.</li>
              
                              <li><a href="https://developer.mozilla.org/en-US/users/signin/?next=/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService%24locales">Add a translation</a></li>
                          </ul>
          </div>
        </div></li><li class="page-buttons-edit"><a href="https://developer.mozilla.org/en-US/users/signin/?next=/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService%24edit" class="button" data-optimizely-hook="button-edit-doc" id="edit-button">Edit<i aria-hidden="true" class="icon-pencil"></i></a></li><li><button id="advanced-menu" class="only-icon" aria-haspopup="true" aria-owns="advanced-menu-submenu" aria-expanded="false"><span>Advanced</span><i aria-hidden="true" class="icon-cog"></i></button>

        <div class="submenu" id="advanced-menu-submenu">
          <!-- this page -->
          <div class="submenu-column">
            <div class="title">Advanced</div>
            <ul>
                <li><a href="nsIAnnotationService%24history.html">History</a></li>
                                                                
                
                                
                                                                <li class="page-print"><a href="#" onclick="return window.print();"  title="Print page">Print this page</a></li>
            </ul>
          </div>
        </div>
  </li></ul>

        <!-- crumbs -->
          <nav class="crumbs" role="navigation"><ol xmlns:v="http://rdf.data-vocabulary.org/#" aria-label="breadcrumbs">
    <li typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US" rel="v:url" property="v:title">MDN</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla" rel="v:url" property="v:title">Mozilla</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech" rel="v:url" property="v:title">Mozilla technologies</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM" rel="v:url" property="v:title">XPCOM</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference" rel="v:url" property="v:title">XPCOM reference</a></li>
          <li class="crumb" typeof="v:Breadcrumb"><a href="../Interface.html" rel="v:url" property="v:title">XPCOM Interface Reference</a></li>
        <li class="crumb" typeof="v:Breadcrumb" property="v:title">nsIAnnotationService</li>
  </ol></nav>
      </div>

      <!-- heading -->
      <div id="wiki-document-head" class="document-head">
          <span class="from-search-previous-box">
            <a class="button from-search-previous only-icon disabled" title="Previous Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-left"></i></a>
          </span>
          <span class="from-search-navigate-wrap">
            <a href="#" class="from-search-navigate"><span class="from-search-navigate-up"><i aria-hidden="true" class="icon-double-angle-up"></i></span><span class="from-search-navigate-down"><i aria-hidden="true" class="icon-double-angle-down"></i></span></a>
          </span>
          <div class="from-search-toc">
            <span class="title">Your Search Results</span>
            <ol></ol>
          </div>
          <span class="from-search-next-box">
            <a class="button from-search-next only-icon disabled" title="Next Search Result" data-empty-title="No Previous Search Result"><i aria-hidden="true" class="icon-chevron-right"></i></a>
          </span>
        <h1>nsIAnnotationService</h1>
        
      </div>
      
      <!-- start the main content container -->
        <div id="wiki-column-container" class="wiki-right-present wiki-left-closed wiki-left-none">

          
          <!-- content row with three strips -->
          <div class="column-container column-container-reverse">

                          <!-- TOC, approvals, etc -->
              <div class="column-strip wiki-column" id="wiki-right">
                            <!-- table of contents -->
              <div id="toc" class="toc toggleable">
                <a href="#toc" class="title toggler" data-open-icon="icon-plus" data-closed-icon="icon-minus">In This Article<i></i></a>
                <ol class="toggle-container">
                  <code></code><code></code><code></code><li><a href="#Method_overview" rel="internal">Method overview</a><code><code></code><code></code></code><code><code></code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code><code></code></code><code><code></code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code></code><code><code></code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code></code><code></code><code><code></code><code></code></code><code></code><code><code></code></code><code><code></code></code><code><code></code><code></code></code><li><a href="#Constants" rel="internal">Constants</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#Methods" rel="internal">Methods</a><ol><li><a href="#setPageAnnotation()" rel="internal">setPageAnnotation()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setItemAnnotation()" rel="internal">setItemAnnotation()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setPageAnnotationString()" rel="internal">setPageAnnotationString()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setItemAnnotationString()" rel="internal">setItemAnnotationString()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setPageAnnotationInt32()" rel="internal">setPageAnnotationInt32()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setItemAnnotationInt32()" rel="internal">setItemAnnotationInt32()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setPageAnnotationInt64()" rel="internal">setPageAnnotationInt64()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setItemAnnotationInt64()" rel="internal">setItemAnnotationInt64()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setPageAnnotationDouble()" rel="internal">setPageAnnotationDouble()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setItemAnnotationDouble()" rel="internal">setItemAnnotationDouble()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setPageAnnotationBinary()" rel="internal">setPageAnnotationBinary()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#setItemAnnotationBinary()" rel="internal">setItemAnnotationBinary()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getPageAnnotation()" rel="internal">getPageAnnotation()</a><code></code><code></code><code></code><code></code><li><a href="#getItemAnnotation()" rel="internal">getItemAnnotation()</a><code></code><code></code><code></code><code></code><li><a href="#getPageAnnotationString()" rel="internal">getPageAnnotationString()</a><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getItemAnnotationString()" rel="internal">getItemAnnotationString()</a><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getPageAnnotationInt32()" rel="internal">getPageAnnotationInt32()</a><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getItemAnnotationInt32()" rel="internal">getItemAnnotationInt32()</a><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getPageAnnotationInt64()" rel="internal">getPageAnnotationInt64()</a><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getItemAnnotationInt64()" rel="internal">getItemAnnotationInt64()</a><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getPageAnnotationDouble()" rel="internal">getPageAnnotationDouble()</a><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getItemAnnotationDouble()" rel="internal">getItemAnnotationDouble()</a><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getPageAnnotationBinary()" rel="internal">getPageAnnotationBinary()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getItemAnnotationBinary()" rel="internal">getItemAnnotationBinary()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getPageAnnotationInfo()" rel="internal">getPageAnnotationInfo()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getItemAnnotationInfo()" rel="internal">getItemAnnotationInfo()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#getPageAnnotationType()" rel="internal">getPageAnnotationType()</a><code></code><code></code><code></code><code></code><li><a href="#getItemAnnotationType()" rel="internal">getItemAnnotationType()</a><code></code><code></code><code></code><code></code><li><a href="#getPagesWithAnnotation()" rel="internal">getPagesWithAnnotation()</a><code></code><code></code><code></code><li><a href="#getItemsWithAnnotation()" rel="internal">getItemsWithAnnotation()</a><code></code><code></code><code></code><li><a href="#getPageAnnotationNames()" rel="internal">getPageAnnotationNames()</a><code></code><code></code><code></code><li><a href="#getItemAnnotationNames()" rel="internal">getItemAnnotationNames()</a><code></code><code></code><code></code><li><a href="#pageHasAnnotation()" rel="internal">pageHasAnnotation()</a><code></code><code></code><code></code><code></code><li><a href="#itemHasAnnotation()" rel="internal">itemHasAnnotation()</a><code></code><code></code><code></code><code></code><li><a href="#removePageAnnotation()" rel="internal">removePageAnnotation()</a><code></code><code></code><li><a href="#removeItemAnnotation()" rel="internal">removeItemAnnotation()</a><code></code><code></code><li><a href="#removePageAnnotations()" rel="internal">removePageAnnotations()</a><code></code><li><a href="#removeItemAnnotations()" rel="internal">removeItemAnnotations()</a><code></code><li><a href="#copyPageAnnotations()" rel="internal">copyPageAnnotations()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#copyItemAnnotations()" rel="internal">copyItemAnnotations()</a><code></code><code></code><code></code><code></code><code></code><code></code><code></code><li><a href="#addObserver()" rel="internal">addObserver()</a><code></code><li><a href="#removeObserver()" rel="internal">removeObserver()</a><code></code><code></code><li><a href="#getAnnotationURI()" rel="internal">getAnnotationURI()</a><code></code><code></code><code></code><code></code><code></code><li><a href="#See_also" rel="internal">See also</a><code></code></ol></li>
                </ol>
              </div>
                            </div>
            
                                                  
            <!-- center: main article content -->
            <div id="wiki-content" class="column-main wiki-column text-content">

              
              
                                                                                          
              <!-- just the article content -->
              <article id="wikiArticle">
                                                      <p></p><div style="border: solid #ddd 2px; margin-bottom: 12px;"> 
<div style="background: #eee; padding: 2px;"><code><a class="external" href="http://mxr.mozilla.org/mozilla-central/source/toolkit/components/places/public/nsIAnnotationService.idl" rel="custom">toolkit/components/places/public/nsIAnnotationService.idl</a></code><span style="text-align: right; float: right;"><a href="en-US/docs/Interfaces/About_Scriptable_Interfaces.html" style="color: #00cc00; font-weight: 700;">Scriptable</a></span></div> 
<span style="padding: 4px 2px;"> 
 
Stores arbitrary data about a web page. Supported for use from trusted code, such as extensions, but not from web content. 
</span> 
 
  <div style="height: 42px; position: relative; padding: 2px; width: auto;"> 
 
  <div style="top: 22px; font-size: 11px; position: absolute;">1.0</div> 
   
  <div style="top: 22px; font-size: 11px; position: absolute; left: 0px; text-align: right; float: right; width: 100%;">28</div> 
   
  <div style="height: 8px; top: 16px; background: #dd0000; left: 0px; position: absolute; width: 18.75%;"></div> 
   
<div style="height: 8px; top: 16px; left: 18.75%; background: #00dd00; position: absolute; width: 81.25%;" title="Introduced in Gecko 1.9 (Firefox 3)"></div> 
 
<div style="top: 0px; font-size: 11px; position: absolute; left: 18.75%;">Introduced</div> 
<div style="top: 22px; font-size: 11px; position: absolute; left: 18.75%;">Gecko 1.9</div> 
 
    <div style="height: 8px; top: 16px; left: 24.5%; background: #eeee00; position: absolute; width: 1%; border-radius: 4px; -webkit-border-radius: 4px;" title="Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)"></div> 
     
</div> 
 
<div style="background: #eee; padding: 2px;"> 
Inherits from: <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsISupports" title="">nsISupports</a></code> 
<span style="text-align: right; float: right;">Last changed in Gecko 2.0 (Firefox 4 / Thunderbird 3.3 / SeaMonkey 2.1)</span></div> 
</div><p></p>
<p>Implemented by: <code>"@mozilla.org/browser/annotation-service;1"</code>. To use this service, use:</p>
<pre>var annotationService = Components.classes["@mozilla.org/browser/annotation-service;1"]
                        .getService(Components.interfaces.nsIAnnotationService);
</pre>
<p></p><div class="note"><strong>Note:</strong> The annotation service is not thread-safe. You should only use it from the main thread.</div><p></p>
<h2 id="Method_overview" name="Method_overview">Method overview</h2>
<table class="standard-table">
  <tbody>
    <tr>
      <td><code>void <a href="#setPageAnnotation()">setPageAnnotation</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIVariant" title="">nsIVariant</a></code> aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setItemAnnotation()">setItemAnnotation</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIVariant" title="">nsIVariant</a></code> aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setPageAnnotationString()">setPageAnnotationString</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in AString aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>boolean <a href="#setItemAnnotationString()">setItemAnnotationString</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in AString aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setPageAnnotationInt32()">setPageAnnotationInt32</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in long aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setItemAnnotationInt32()">setItemAnnotationInt32</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in long aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setPageAnnotationInt64()">setPageAnnotationInt64</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in long long aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setItemAnnotationInt64()">setItemAnnotationInt64</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in long long aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setPageAnnotationDouble()">setPageAnnotationDouble</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in double aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setItemAnnotationDouble()">setItemAnnotationDouble</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, in double aValue, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setPageAnnotationBinary()">setPageAnnotationBinary</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName,[const, array, size_is(aDataLen)] in octet aData, in unsigned long aDataLen, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aMimeType, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#setItemAnnotationBinary()">setItemAnnotationBinary</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName,[const, array, size_is(aDataLen)] in octet aData, in unsigned long aDataLen, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aMimeType, in long aFlags, in unsigned short aExpiration);</code></td>
    </tr>
    <tr>
      <td><code><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIVariant" title="">nsIVariant</a></code> <a href="#getPageAnnotation()">getPageAnnotation</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIVariant" title="">nsIVariant</a></code> <a href="#getItemAnnotation()">getItemAnnotation</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>AString <a href="#getPageAnnotationString()">getPageAnnotationString</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>AString <a href="#getItemAnnotationString()">getItemAnnotationString</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>long <a href="#getPageAnnotationInt32()">getPageAnnotationInt32</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>long <a href="#getItemAnnotationInt32()">getItemAnnotationInt32</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>long long <a href="#getPageAnnotationInt64()">getPageAnnotationInt64</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>long long <a href="#getItemAnnotationInt64()">getItemAnnotationInt64</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>double <a href="#getPageAnnotationDouble()">getPageAnnotationDouble</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>double <a href="#getItemAnnotationDouble()">getItemAnnotationDouble</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#getPageAnnotationBinary()">getPageAnnotationBinary</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName,[array, size_is(aDataLen)] out octet aData, out unsigned long aDataLen, out <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aMimeType);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#getItemAnnotationBinary()">getItemAnnotationBinary</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName,[array, size_is(aDataLen)] out octet aData, out unsigned long aDataLen, out <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aMimeType);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#getPageAnnotationInfo()">getPageAnnotationInfo</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, out PRInt32 aFlags, out unsigned short aExpiration, out <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aMimeType, out unsigned short aType);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#getItemAnnotationInfo()">getItemAnnotationInfo</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName, out long aFlags, out unsigned short aExpiration, out <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aMimeType, out unsigned short aType);</code></td>
    </tr>
    <tr>
      <td><code>PRUint16 <a href="#getPageAnnotationType()">getPageAnnotationType</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>PRUint16 <a href="#getItemAnnotationType()">getItemAnnotationType</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#getPagesWithAnnotation()">getPagesWithAnnotation</a>(in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> name, [optional] out unsigned long resultCount, [retval, array, size_is(resultCount)] out <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> results);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#getItemsWithAnnotation()">getItemsWithAnnotation</a>(in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> name, </code><code>[optional] </code><code>out unsigned long resultCount, [retval, array, size_is(resultCount)] out long long results);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#getPageAnnotationNames()">getPageAnnotationNames</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, </code><code>[optional] </code><code>out unsigned long count, [retval, array, size_is(count)] out <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIVariant" title="">nsIVariant</a></code> result);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#getItemAnnotationNames()">getItemAnnotationNames</a>(in long long aItemId, </code><code>[optional] </code><code>out unsigned long count, [retval, array, size_is(count)] out <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIVariant" title="">nsIVariant</a></code> result);</code></td>
    </tr>
    <tr>
      <td><code>boolean <a href="#pageHasAnnotation()">pageHasAnnotation</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>boolean <a href="#itemHasAnnotation()">itemHasAnnotation</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#removePageAnnotation()">removePageAnnotation</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#removeItemAnnotation()">removeItemAnnotation</a>(in long long aItemId, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#removePageAnnotations()">removePageAnnotations</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#removeItemAnnotations()">removeItemAnnotations</a>(in long long aItemId);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#copyPageAnnotations()">copyPageAnnotations</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aSourceURI, in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aDestURI, in boolean aOverwriteDest);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#copyItemAnnotations()">copyItemAnnotations</a>(in long long aSourceItemId, in long long aDestItemId, in boolean aOverwriteDest);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#addObserver()">addObserver</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationObserver" title="">nsIAnnotationObserver</a></code> aObserver);</code></td>
    </tr>
    <tr>
      <td><code>void <a href="#removeObserver()">removeObserver</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationObserver" title="">nsIAnnotationObserver</a></code> aObserver);</code></td>
    </tr>
    <tr>
      <td><code><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> <a href="#getAnnotationURI()">getAnnotationURI</a>(in <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIURI" title="">nsIURI</a></code> aURI, in <a class="new" href="https://developer.mozilla.org/en-US/docs/AUTF8String" title="AUTF8String">AUTF8String</a> aName);</code></td>
    </tr>
  </tbody>
</table>
<h2 id="Constants" name="Constants">Constants</h2>
<table class="standard-table">
  <tbody>
    <tr>
      <td class="header">Constant</td>
      <td class="header">Value</td>
      <td class="header">Description</td>
    </tr>
    <tr>
      <td><code>EXPIRE_SESSION</code></td>
      <td>0</td>
      <td>For temporary data that can be discarded when the user exits. Removed at application exit.</td>
    </tr>
    <tr>
      <td><code>EXPIRE_WEEKS</code></td>
      <td>2</td>
      <td>For general page settings, things the user is interested in seeing if they come back to this page some time in the near future. Removed at 30 days.</td>
    </tr>
    <tr>
      <td><code>EXPIRE_MONTHS</code></td>
      <td>3</td>
      <td>Something that the user will be interested in seeing in their history like <code>favicons</code>. If they haven't visited a page in a couple of months, they probably aren't interested in many other annotations, the positions of things, or other stuff you create, so put that in the weeks policy. Removed at 180 days.</td>
    </tr>
    <tr>
      <td><code>EXPIRE_NEVER</code></td>
      <td>4</td>
      <td>For data that should never expire as long as the URI is in the database.</td>
    </tr>
    <tr>
      <td><code>EXPIRE_WITH_HISTORY</code></td>
      <td>5</td>
      <td>For annotations that only live as long as the URI is in history (For example, has &gt; 0 visits). This is only valid for page annotations.</td>
    </tr>
    <tr>
      <td><code>EXPIRE_DAYS</code></td>
      <td>6</td>
      <td>For short-lived temporary data that you still want to outlast a session. Removed at 7 days.</td>
    </tr>
    <tr>
      <td><code>TYPE_INT32</code></td>
      <td>1</td>
      <td><code>INT32</code> type constant.</td>
    </tr>
    <tr>
      <td><code>TYPE_DOUBLE</code></td>
      <td>2</td>
      <td><code>DOUBLE</code> type constant.</td>
    </tr>
    <tr>
      <td><code>TYPE_STRING</code></td>
      <td>3</td>
      <td><code>STRING</code> type constant.</td>
    </tr>
    <tr>
      <td><code>TYPE_BINARY</code></td>
      <td>4</td>
      <td><code>BINARY</code> type constant.</td>
    </tr>
    <tr>
      <td><code>TYPE_INT64</code></td>
      <td>5</td>
      <td><code>INT64</code> type constant.</td>
    </tr>
  </tbody>
</table>
<div class="note">
<strong>Note:</strong> Use of value "1" is omitted due to it's temporary use as <code>EXPIRE_NEVER</code> in <a class="external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=319455" title="FIXED: Expire annotations">bug 319455</a>.</div>

<h2 id="Methods" name="Methods">Methods</h2>
<h3 id="setPageAnnotation()" name="setPageAnnotation()">setPageAnnotation()</h3>
<p>This method sets an annotation for given URI, overwriting any previous annotation with the same URL/name. IT IS YOUR JOB TO NAMESPACE YOUR ANNOTATION NAMES. Use the form <code>"namespace/value"</code>, so your name would be like <code>"bills_extension/page_state"</code> or <code>"history/thumbnail"</code>.</p>
<p>Do not use characters that are not valid in URLs such as spaces, <code>":"</code>, commas, or most other symbols. You should stick to ASCII letters and numbers plus <code>"_"</code>, <code>"-"</code>, and <code>"/"</code>.</p>
<p>The annotation "favicon" is special. Favicons are stored in the favicon service, but are special cased in the protocol handler so they look like annotations. Do not set favicons using this service, it will not work.</p>
<p>Binary annotations should be set using <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setPageAnnotationBinary()">setPageAnnotationBinary()</a></code>. For other types, only C++ consumers may use the type-specific methods.</p>
<pre>void setPageAnnotation(
  in nsIURI aURI, 
  in AUTF8String aName,
  in nsIVariant aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<p></p><div class="note"><strong>Note:</strong> ALL PAGE ANNOTATIONS WILL GET DELETED WHEN THE PAGE IS REMOVED FROM HISTORY IF THE PAGE IS NOT BOOKMARKED. This means that if you create an annotation on an unvisited URI, it will get deleted when the browser shuts down. Otherwise, URIs can exist in history as annotations but the user has no way of knowing it, potentially violating their privacy expectations about actions such as Clear history. If there is an important annotation that the user or extension wants to keep, you should add a bookmark for the page and use an EXPIRE_NEVER annotation. This will ensure the annotation exists until the item is removed by the user.</div><p></p>
<h3 id="setItemAnnotation()" name="setItemAnnotation()">setItemAnnotation()</h3>
<p>This method sets an annotation for given item, overwriting any previous annotation with the same URL/name. IT IS YOUR JOB TO NAMESPACE YOUR ANNOTATION NAMES. Use the form <code>"namespace/value"</code>, so your name would be like <code>"bills_extension/page_state"</code> or <code>"history/thumbnail"</code>.</p>
<p>Do not use characters that are not valid in URLs such as spaces, <code>":"</code>, commas, or most other symbols. You should stick to ASCII letters and numbers plus <code>"_"</code>, <code>"-"</code>, and <code>"/"</code>.</p>
<p>The annotation "favicon" is special. Favicons are stored in the favicon service, but are special cased in the protocol handler so they look like annotations. Do not set favicons using this service, it will not work.</p>
<p>Binary annotations should be set using <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setPageAnnotationBinary()">setPageAnnotationBinary()</a></code>. For other types, only C++ consumers may use the type-specific methods.</p>
<pre>void setItemAnnotation(
  in long long aItemId, 
  in AUTF8String aName,
  in nsIVariant aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemID</code></dt>
  <dd>
    The item on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<p></p><div class="note"><strong>Note:</strong> ALL ITEM ANNOTATIONS WILL GET DELETED WHEN THE BOOKMARK IS REMOVED.</div><p></p>
<h3 id="setPageAnnotationString()" name="setPageAnnotationString()">setPageAnnotationString()</h3>
<p>This method sets an annotation for given URI by taking a <code>String</code> as input value, overwriting any previous annotation with the same URL/name. IT IS YOUR JOB TO NAMESPACE YOUR ANNOTATION NAMES. Use the form <code>"namespace/value"</code>, so your name would be like <code>"bills_extension/page_state"</code> or <code>"history/thumbnail"</code>.</p>
<p>Do not use characters that are not valid in URLs such as spaces, <code>":"</code>, commas, or most other symbols. You should stick to ASCII letters and numbers plus <code>"_"</code>, <code>"-"</code>, and <code>"/"</code>.</p>
<p>The annotation "favicon" is special. Favicons are stored in the favicon service, but are special cased in the protocol handler so they look like annotations. Do not set favicons using this service, it will not work.</p>
<p>Binary annotations should be set using <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setPageAnnotationBinary()">setPageAnnotationBinary()</a></code>. For other types, only C++ consumers may use the type-specific methods.</p>
<pre>void setPageAnnotationString(
  in nsIURI aURI, 
  in AUTF8String aName,
  in AString aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<p></p><div class="note"><strong>Note:</strong> ALL PAGE ANNOTATIONS WILL GET DELETED WHEN THE PAGE IS REMOVED FROM HISTORY IF THE PAGE IS NOT BOOKMARKED. This means that if you create an annotation on an unvisited URI, it will get deleted when the browser shuts down. Otherwise, URIs can exist in history as annotations but the user has no way of knowing it, potentially violating their privacy expectations about actions such as Clear history. If there is an important annotation that the user or extension wants to keep, you should add a bookmark for the page and use an EXPIRE_NEVER annotation. This will ensure the annotation exists until the item is removed by the user.</div><p></p>
<h3 id="setItemAnnotationString()" name="setItemAnnotationString()">setItemAnnotationString()</h3>
<p>This method sets an annotation for given item by taking a <code>String</code> as input value, overwriting any previous annotation with the same URL/name. IT IS YOUR JOB TO NAMESPACE YOUR ANNOTATION NAMES. Use the form <code>"namespace/value"</code>, so your name would be like <code>"bills_extension/page_state"</code> or <code>"history/thumbnail"</code>.</p>
<p>Do not use characters that are not valid in URLs such as spaces, <code>":"</code>, commas, or most other symbols. You should stick to ASCII letters and numbers plus <code>"_"</code>, <code>"-"</code>, and <code>"/"</code>.</p>
<p>The annotation "favicon" is special. Favicons are stored in the favicon service, but are special cased in the protocol handler so they look like annotations. Do not set favicons using this service, it will not work.</p>
<p>Binary annotations should be set using <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code>. For other types, only C++ consumers may use the type-specific methods.</p>
<pre>void setPageAnnotation(
  in long long aItemId, 
  in AUTF8String aName,
  in AString aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemID</code></dt>
  <dd>
    The item on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<p></p><div class="note"><strong>Note:</strong> ALL ITEM ANNOTATIONS WILL GET DELETED WHEN THE BOOKMARK IS REMOVED.</div><p></p>
<h3 id="setPageAnnotationInt32()" name="setPageAnnotationInt32()">setPageAnnotationInt32()</h3>
<p>This method sets an annotation for given URI, just like <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setPageAnnotationString()">setPageAnnotationString()</a></code>, but takes an <code>Int32</code> as an input.</p>
<pre>void setPageAnnotationInt32(
  in nsIURI aURI, 
  in AUTF8String aName,
  in long aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters_5" name="Parameters_5">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<h3 id="setItemAnnotationInt32()" name="setItemAnnotationInt32()">setItemAnnotationInt32()</h3>
<p>This method sets an annotation for given item, just like <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationString()">setItemAnnotationString()</a></code>, but takes an <code>Int32</code> as an input.</p>
<pre>void setItemAnnotationInt32(
  in long long aItemId, 
  in AUTF8String aName,
  in long aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<h3 id="setPageAnnotationInt64()" name="setPageAnnotationInt64()">setPageAnnotationInt64()</h3>
<p>This method sets an annotation for given URI, just like <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setPageAnnotationString()">setPageAnnotationString()</a></code>, but takes an <code>Int64</code> as an input.</p>
<pre>void setPageAnnotationInt64(
  in nsIURI aURI, 
  in AUTF8String aName,
  in long long aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<h3 id="setItemAnnotationInt64()" name="setItemAnnotationInt64()">setItemAnnotationInt64()</h3>
<p>This method sets an annotation for given item, just like <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationString()">setItemAnnotationString()</a></code>, but takes an <code>Int64</code> as an input.</p>
<pre>void setItemAnnotationInt64(
  in long long aItemId, 
  in AUTF8String aName,
  in long long aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<h3 id="setPageAnnotationDouble()" name="setPageAnnotationDouble()">setPageAnnotationDouble()</h3>
<p>This method sets an annotation for given URI, just like <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setPageAnnotationString()">setPageAnnotationString()</a></code>, but takes an <code>Double</code> as an input.</p>
<pre> void setPageAnnotationDouble(
   in nsIURI aURI, 
   in AUTF8String aName,
   in double aValue, 
   in long aFlags,
   in unsigned short aExpiration
 );
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<h3 id="setItemAnnotationDouble()" name="setItemAnnotationDouble()">setItemAnnotationDouble()</h3>
<p>This method sets an annotation for given item, just like <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationString()">setItemAnnotationString()</a></code>, but takes an <code>Double</code> as an input.</p>
<pre>void setItemAnnotationDouble(
  in long long aItemId, 
  in AUTF8String aName,
  in double aValue, 
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aValue</code></dt>
  <dd>
    The annotation value.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<h3 id="setPageAnnotationBinary()" name="setPageAnnotationBinary()">setPageAnnotationBinary()</h3>
<p>This method sets an annotation for given URI, just like <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setPageAnnotationString()">setPageAnnotationString()</a></code>, but takes <code>Binary</code> data as an input. You MUST supply a valid <code>MIME</code> type.</p>
<pre>void setPageAnnotationBinary(
  in nsIURI aURI, 
  in AUTF8String aName,
  [const,array,size_is(aDataLen)] in octet aData, 
  in unsigned long aDataLen,
  in AUTF8String aMimeType,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aData</code></dt>
  <dd>
    Binary contents of the page to save.</dd>
  <dt>
    <code>aDataLen</code></dt>
  <dd>
    Length of binary data.</dd>
  <dt>
    <code>aMimeType</code></dt>
  <dd>
    <code>MIME</code> type of the data to store. MUST be supplied.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<h3 id="setItemAnnotationBinary()" name="setItemAnnotationBinary()">setItemAnnotationBinary()</h3>
<p>This method sets an annotation for given item, just like <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationString()">setItemAnnotationString()</a></code>, but takes <code>Binary</code> data as an input. You MUST supply a valid <code>MIME</code> type.</p>
<pre>void setItemAnnotationBinary(
  in long long aItemId, 
  in AUTF8String aName,
  [const,array,size_is(aDataLen)] in octet aData, 
  in unsigned long aDataLen,
  in AUTF8String aMimeType,
  in long aFlags,
  in unsigned short aExpiration
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is to be set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aData</code></dt>
  <dd>
    Binary contents of the item to save.</dd>
  <dt>
    <code>aDataLen</code></dt>
  <dd>
    Length of binary data.</dd>
  <dt>
    <code>aMimeType</code></dt>
  <dd>
    <code>MIME</code> type of the data to store. MUST be supplied.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
</dl>
<h3 id="getPageAnnotation()" name="getPageAnnotation()">getPageAnnotation()</h3>
<p>This method retrieves the value of a given URI annotation. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>nsIVariant getPageAnnotation(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a page annotation.</p>
<h3 id="getItemAnnotation()" name="getItemAnnotation()">getItemAnnotation()</h3>
<p>This method retrieves the value of a given item annotation. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>nsIVariant getItemAnnotation(
  in long long aItemId, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters_14" name="Parameters_14">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns an item annotation.</p>
<h3 id="getPageAnnotationString()" name="getPageAnnotationString()">getPageAnnotationString()</h3>
<p>This method retrieves the value of a given URI annotation in <code>String</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>AString getPageAnnotationString(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a <code>String</code> value page annotation.</p>
<h3 id="getItemAnnotationString()" name="getItemAnnotationString()">getItemAnnotationString()</h3>
<p>This method retrieves the value of a given item annotation in <code>String</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>AString getItemAnnotationString(
  in long long aItemId, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a <code>String</code> value item annotation.</p>
<h3 id="getPageAnnotationInt32()" name="getPageAnnotationInt32()">getPageAnnotationInt32()</h3>
<p>This method retrieves the value of a given URI annotation in a <code>Int32</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>long getPageAnnotationInt32(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters_17" name="Parameters_17">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns an <code>Int32</code> value page annotation.</p>
<h3 id="getItemAnnotationInt32()" name="getItemAnnotationInt32()">getItemAnnotationInt32()</h3>
<p>This method retrieves the value of a given item annotation in a <code>Int32</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>long getItemAnnotationInt32(
  in long long aItemId, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters_18" name="Parameters_18">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns an <code>Int32</code> value item annotation.</p>
<h3 id="getPageAnnotationInt64()" name="getPageAnnotationInt64()">getPageAnnotationInt64()</h3>
<p>This method retrieves the value of a given URI annotation in a <code>Int64</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>long long getPageAnnotationInt64(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters_19" name="Parameters_19">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns an <code>Int64</code> value page annotation.</p>
<h3 id="getItemAnnotationInt64()" name="getItemAnnotationInt64()">getItemAnnotationInt64()</h3>
<p>This method retrieves the value of a given item annotation in a <code>Int64</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>long long getItemAnnotationInt64(
  in long long aItemId, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns an <code>Int64</code> value item annotation.</p>
<h3 id="getPageAnnotationDouble()" name="getPageAnnotationDouble()">getPageAnnotationDouble()</h3>
<p>This method retrieves the value of a given URI annotation in <code>Double</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>double getPageAnnotationDouble(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a <code>Double</code> value page annotation.</p>
<h3 id="getItemAnnotationDouble()" name="getItemAnnotationDouble()">getItemAnnotationDouble()</h3>
<p>This method retrieves the value of a given item annotation in <code>Double</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type.</p>
<pre>double getItemAnnotationDouble(
  in long long aItemId, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a <code>Double</code> value item annotation.</p>
<h3 id="getPageAnnotationBinary()" name="getPageAnnotationBinary()">getPageAnnotationBinary()</h3>
<p>This method retrieves the value of a given URI annotation in a <code>Binary</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type. This also returns the <code>MIME</code> type.</p>
<pre>void getPageAnnotationBinary(
  in nsIURI aURI, 
  in AUTF8String aName,
  [array,size_is(aDataLen)] out octet aData,
  out unsigned long aDataLen,
  out AUTF8String aMimeType
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aData</code></dt>
  <dd>
    Binary contents of the page to retrieve.</dd>
  <dt>
    <code>aDataLen</code></dt>
  <dd>
    Length of binary data.</dd>
  <dt>
    <code>aMimeType</code></dt>
  <dd>
    <code>MIME</code> type of the data to be retrieved.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a <code>Binary</code> value and a <code>MIME</code> type page annotation.</p>
<h3 id="getItemAnnotationBinary()" name="getItemAnnotationBinary()">getItemAnnotationBinary()</h3>
<p>This method retrieves the value of a given item annotation in a <code>Binary</code> format. Throws an error if the annotation does not exist. Throws for binary annotations, for which <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getPageAnnotationBinary()">getPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getItemAnnotationBinary()">getItemAnnotationBinary()</a></code> should be used. C++ consumers may use the type-specific methods. The type-specific methods throw if the given annotation is set in a different type. This also returns the <code>MIME</code> type.</p>
<pre>void getItemAnnotationBinary(
  in long long aItemId, 
  in AUTF8String aName,
  [array,size_is(aDataLen)] out octet aData,
  out unsigned long aDataLen,
  out AUTF8String aMimeType
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aData</code></dt>
  <dd>
    Binary contents of the item to retrieve.</dd>
  <dt>
    <code>aDataLen</code></dt>
  <dd>
    Length of binary data.</dd>
  <dt>
    <code>aMimeType</code></dt>
  <dd>
    <code>MIME</code> type of the data to be retrieved.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a <code>Binary</code> value and a <code>MIME</code> type item annotation.</p>
<h3 id="getPageAnnotationInfo()" name="getPageAnnotationInfo()">getPageAnnotationInfo()</h3>
<p>This method retrieves info about an existing annotation for the given URI.</p>
<pre>void getPageAnnotationInfo(
  in nsIURI aURI,
  in AUTF8String aName,
  out PRInt32 aFlags,
  out unsigned short aExpiration,
  out AUTF8String aMimeType,
  out unsigned short aType
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
  <dt>
    <code>aMimeType</code></dt>
  <dd>
    <code>MIME</code> type of the data to be retrieved. Default to <code>"0"</code> if value was not binary data.</dd>
  <dt>
    <code>aType</code></dt>
  <dd>
    One of <code>TYPE_*</code> constansts defined above.</dd>
</dl>
<h3 id="getItemAnnotationInfo()" name="getItemAnnotationInfo()">getItemAnnotationInfo()</h3>
<p>This method retrieves info about an existing annotation for the given item.</p>
<pre>void getItemAnnotationInfo(
  in long long aItemId,
  in AUTF8String aName,
  out long aFlags,
  out unsigned short aExpiration,
  out AUTF8String aMimeType,
  out unsigned short aType
);
</pre>
<h6 id="Parameters_26" name="Parameters_26">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>aFlags</code></dt>
  <dd>
    Should be <code>"0"</code> for now, some flags will be defined in the future.</dd>
  <dt>
    <code>aExpiration</code></dt>
  <dd>
    One of the <code>EXPIRE_*</code> constant value defined above.</dd>
  <dt>
    <code>aMimeType</code></dt>
  <dd>
    <code>MIME</code> type of the data to be retrieved. Default to <code>"0"</code> if value was not binary data.</dd>
  <dt>
    <code>aType</code></dt>
  <dd>
    One of <code>TYPE_*</code> constansts defined above.</dd>
</dl>
<h3 id="getPageAnnotationType()" name="getPageAnnotationType()">getPageAnnotationType()</h3>
<p>This method retrieves the type of an existing annotation. Use <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getAnnotationInfo()">getAnnotationInfo()</a></code> method, if you need this along with the mime-type etc. It throwns an exception if the annotation is not set.</p>
<pre>PRUint16 getPageAnnotationType(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns one of the <code>TYPE_*</code> constants defined above.</p>
<h3 id="getItemAnnotationType()" name="getItemAnnotationType()">getItemAnnotationType()</h3>
<p>This method retrieves the type of an existing annotation. Use <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#getAnnotationInfo()">getAnnotationInfo()</a></code> method, if you need this along with the mime-type etc. It throwns an exception if the annotation is not set.</p>
<pre>PRUint16 getPageAnnotationType(
  in long long aItemId, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns one of the <code>TYPE_*</code> constants defined above.</p>
<h3 id="getPagesWithAnnotation()" name="getPagesWithAnnotation()">getPagesWithAnnotation()</h3>
<p>This method returns a list of all URIs having a given annotation.</p>
<pre>void getPagesWithAnnotation(
  in AUTF8String name,
  [optional] out unsigned long resultCount,
  [retval, array, size_is(resultCount)] out nsIURI results
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>name</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>resultCount</code> <span class="inlineIndicator optional optionalInline">Optional</span></dt>
  <dd>
    Count of URIs.</dd>
  <dt>
    <code>results</code></dt>
  <dd>
    Returns the list of all URIs.</dd>
</dl>
<h3 id="getItemsWithAnnotation()" name="getItemsWithAnnotation()">getItemsWithAnnotation()</h3>
<p>This method returns a list of all items having a given annotation.</p>
<pre>void getItemsWithAnnotation(
  in AUTF8String name,
  [optional] out unsigned long resultCount,
  [retval, array, size_is(resultCount)] out long long results
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>name</code></dt>
  <dd>
    The annotation name.</dd>
  <dt>
    <code>resultCount</code> <span class="inlineIndicator optional optionalInline">Optional</span></dt>
  <dd>
    Count of items.</dd>
  <dt>
    <code>results</code></dt>
  <dd>
    Returns the list of all items.</dd>
</dl>
<h3 id="getPageAnnotationNames()" name="getPageAnnotationNames()">getPageAnnotationNames()</h3>
<p>This method retrieves the names of all annotations for the given URI.</p>
<pre>void getPageAnnotationNames(
  in nsIURI aURI, 
  [optional] out unsigned long count,
  [retval, array, size_is(count)] out nsIVariant result
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>count</code> <span class="inlineIndicator optional optionalInline">Optional</span></dt>
  <dd>
    Count of annotation names available.</dd>
  <dt>
    <code>result</code></dt>
  <dd>
    Returns the name of all annotations.</dd>
</dl>
<h3 id="getItemAnnotationNames()" name="getItemAnnotationNames()">getItemAnnotationNames()</h3>
<p>This method retrieves the names of all annotations for the given item.</p>
<pre>void getItemAnnotationNames(
  in long long aItemId, 
  [optional] out unsigned long count,
  [retval, array, size_is(count)] out nsIVariant result
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>count</code> <span class="inlineIndicator optional optionalInline">Optional</span></dt>
  <dd>
    Count of annotations name available.</dd>
  <dt>
    <code>result</code></dt>
  <dd>
    Returns the name of all annotations.</dd>
</dl>
<h3 id="pageHasAnnotation()" name="pageHasAnnotation()">pageHasAnnotation()</h3>
<p>This method tests for annotation existance for given URI.</p>
<pre>boolean pageHasAnnotation(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns <code>true</code>, if an annotation exists for given URI, otherwise returns <code>false</code>.</p>
<h3 id="itemHasAnnotation()" name="itemHasAnnotation()">itemHasAnnotation()</h3>
<p>This method tests for annotation existance for given item.</p>
<pre>boolean itemHasAnnotation(
  in long long aItemId, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns <code>true</code>, if an annotation exists for given item, otherwise returns <code>false</code>.</p>
<h3 id="removePageAnnotation()" name="removePageAnnotation()">removePageAnnotation()</h3>
<p>This method removes a specific annotation for given URI. Succeeds even if the annotation is not found.</p>
<pre>void removePageAnnotation(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h3 id="removeItemAnnotation()" name="removeItemAnnotation()">removeItemAnnotation()</h3>
<p>This method removes a specific annotation for given item. Succeeds even if the annotation is not found.</p>
<pre>void removeItemAnnotation(
  in long long aItemId, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h3 id="removePageAnnotations()" name="removePageAnnotations()">removePageAnnotations()</h3>
<p>This method removes all annotations for the given URI. We may want some other similar functions to get annotations with given flags (once we have flags defined).</p>
<pre>void removePageAnnotations(
  in nsIURI aURI
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
</dl>
<h3 id="removeItemAnnotations()" name="removeItemAnnotations()">removeItemAnnotations()</h3>
<p>This method removes all annotations for the given item. We may want some other similar functions to get annotations with given flags (once we have flags defined).</p>
<pre>void removeItemAnnotations(
  in long long aItemId
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aItemId</code></dt>
  <dd>
    The item on which the annotation is set.</dd>
</dl>
<h3 id="copyPageAnnotations()" name="copyPageAnnotations()">copyPageAnnotations()</h3>
<p>This method copies all annotations from the source to the destination URI. If the destination already has an annotation with the same name as one on the source, it will be overwritten if <code>aOverwriteDest</code> is set. Otherwise, the destination URIs will be preferred.</p>
<p>All the source annotations will stay as-is. If you don't want them any more, use <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#removePageAnnotations()">removePageAnnotations()</a></code> on that URI.</p>
<pre>void copyPageAnnotations(
  in nsIURI aSourceURI, 
  in nsIURI aDestURI,
  in boolean aOverwriteDest
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aSourceItemId</code></dt>
  <dd>
    Source item.</dd>
  <dt>
    <code>aDestItemId</code></dt>
  <dd>
    Destination item.</dd>
  <dt>
    <code>aOverwriteDest</code></dt>
  <dd>
    If you want to overwrite existing annotation, set this parameter to <code>true</code>, or else set it to <code>false</code>.</dd>
</dl>
<h3 id="copyItemAnnotations()" name="copyItemAnnotations()">copyItemAnnotations()</h3>
<p>This method copies all annotations from the source to the destination item. If the destination already has an annotation with the same name as one on the source, it will be overwritten if <code>aOverwriteDest</code> is set. Otherwise, the destination URIs will be preferred.</p>
<p>All the source annotations will stay as-is. If you don't want them any more, use <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#removePageAnnotations()">removePageAnnotations()</a></code> on that URI.</p>
<pre>void copyItemAnnotations(
  in long long aSourceItemId, 
  in long long aDestItemId,
  in boolean aOverwriteDest
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aSourceItemId</code></dt>
  <dd>
    Source item.</dd>
  <dt>
    <code>aDestItemId</code></dt>
  <dd>
    Destination item.</dd>
  <dt>
    <code>aOverwriteDest</code></dt>
  <dd>
    If you want to overwrite existing annotation, set this parameter to <code>true</code> or else <code>false</code>.</dd>
</dl>
<h3 id="addObserver()" name="addObserver()">addObserver()</h3>
<p>This method adds an annotation observer. The annotation service will keep an owning reference to the observer object.</p>
<pre>void addObserver(
  in nsIAnnotationObserver aObserver
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aObserver</code></dt>
  <dd>
    Annotation observer.</dd>
</dl>
<h3 id="removeObserver()" name="removeObserver()">removeObserver()</h3>
<p>This method removes an annotaton observer previously registered by <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#addObserver()">addObserver()</a></code> method.</p>
<pre>void removeObserver(
  in nsIAnnotationObserver aObserver
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aObserver</code></dt>
  <dd>
    Annotation observer.</dd>
</dl>
<h3 id="getAnnotationURI()" name="getAnnotationURI()">getAnnotationURI()</h3>
<p>This method returns a URI that can be used to access the given binary annotation. This method does NOT check that the annotation exists. Also, note that you can only load URIs for annotations that have have a valid <code>MIME</code> type set by <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setPageAnnotationBinary()">setPageAnnotationBinary()</a></code> or <code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationService#setItemAnnotationBinary()">setItemAnnotationBinary()</a></code> methods. No non-URI valid chars in name, especially colon, which will mess up parsing.</p>
<pre>nsIURI getAnnotationURI(
  in nsIURI aURI, 
  in AUTF8String aName
);
</pre>
<h6 id="Parameters" name="Parameters">Parameters</h6>
<dl>
  <dt>
    <code>aURI</code></dt>
  <dd>
    The URI on which the annotation is set.</dd>
  <dt>
    <code>aName</code></dt>
  <dd>
    The annotation name.</dd>
</dl>
<h6 id="Return_value" name="Return_value">Return value</h6>
<p>Returns a URI that can be used to access the given binary annotation.</p>
<h3 id="See_also" name="See_also">See also</h3>
<ul>
  <li><a href="https://developer.mozilla.org/en-US/docs/Places" title="Places">Places</a></li>
  <li><a href="https://developer.mozilla.org/en-US/docs/Using_the_Places_annotation_service" title="Using_the_Places_annotation_service">Using the Places annotation service</a></li>
  <li><a href="https://developer.mozilla.org/en-US/docs/Using_the_Places_favicon_service" title="Using_the_Places_favicon_service">Using the Places favicon service</a></li>
  <li><code><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAnnotationObserver" title="">nsIAnnotationObserver</a></code></li>
</ul>
                                                </article>

              
                <!-- attachments list -->
                
                <!-- contributors -->
                <div class="wiki-block contributors">
                  <h2 class="offscreen">Document Tags and Contributors</h2>
                                                      <!-- tags if present -->
                  <div class="tag-attach-list tags contributor-sub">
                    <i aria-hidden="true" class="icon-tags"></i><strong>Tags:</strong>
                    <ul class="tag-list"><li><a href="https://developer.mozilla.org/en-US/docs/tag/Extensions">Extensions</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Interfaces:Scriptable">Interfaces:Scriptable</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM">XPCOM</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Interfaces">Interfaces</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM API Reference">XPCOM API Reference</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/XPCOM Interface Reference">XPCOM Interface Reference</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Developing Mozilla">Developing Mozilla</a></li><li><a href="https://developer.mozilla.org/en-US/docs/tag/Places">Places</a></li></ul>
                  </div>
                                    <div class="contributor-sub"> <i aria-hidden="true" class="icon-group"></i><strong>Contributors to this page:</strong> <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>, <a href="https://developer.mozilla.org/en-US/profiles/ethertank">ethertank</a>, <a href="https://developer.mozilla.org/en-US/profiles/trevorh">trevorh</a>, <a href="https://developer.mozilla.org/en-US/profiles/sdwilsh">sdwilsh</a>, <a href="https://developer.mozilla.org/en-US/profiles/Mak77">Mak77</a>, <a href="https://developer.mozilla.org/en-US/profiles/Liuche">Liuche</a>, <a href="https://developer.mozilla.org/en-US/profiles/WPWoodJr">WPWoodJr</a>, <a href="https://developer.mozilla.org/en-US/profiles/Arehman4">Arehman4</a> </div>                                      <div class="contributor-sub">
                      <i aria-hidden="true" class="icon-clock-o"></i><strong>Last updated by:</strong>
                      <a href="https://developer.mozilla.org/en-US/profiles/Sheppy">Sheppy</a>,
                      <time datetime="2014-04-14T10:42:35-07:00">Apr 14, 2014 10:42:35 AM</time>
                    </div>
                                  </div>
                          </div>

                      </div>
        </div>
      </div>
    </div> <!-- ends "main-content" -->

  <menu type="context" id="edit-history-menu">
    <menuitem data-action="$edit" label="Edit page"></menuitem>
    <menuitem data-action="$history" label="View page history"></menuitem>
  </menu>
  </div></main>

  <!-- Footer -->
  <footer><div class="center">
    <div class="column-container">
      <div class="column-main">
                <p>
          <bdi>&copy; 2005-2014 Mozilla Developer Network and individual contributors<br /> Content is available under <a href="https://developer.mozilla.org/en-US/docs/Project:MDN/About#Copyrights_and_licenses">these licenses</a> &middot; <a href="https://developer.mozilla.org/en-US/docs/Project:MDN/About">About MDN</a> &middot; <a href="http://github.com/mozilla/kuma">Contribute to the code</a> &middot; <a href="http://www.mozilla.org/privacy/websites/">Privacy policy</a></bdi>        </p>
              </div>
      <div class="column-strip">
                                  </div>
    </div>
  </div></footer>

  <!-- site js -->
    <script src="https://developer.mozilla.org/en-US/jsi18n/build:9fd3034"></script>
  
      <!--[if lte IE 8]><script src="/media/redesign/js/libs/selectivizr-1.0.2/selectivizr-build.js?build=9fd3034"></script><![endif]-->

    <script src="../../../../../../../../developer.cdn.mozilla.net/media/js/main-min46d5.js?build=9fd3034"></script>

          <script>
        mdn.analytics.trackOutboundLinks(document.body);
      </script>
    
          <script src="../../../../../../../../developer.cdn.mozilla.net/media/js/wiki-min46d5.js?build=9fd3034"></script>
      
    <script type="text/javascript">
      jQuery('.from-search-toc').mozSearchResults('');
  </script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"beacon-3.newrelic.com","queueTime":1,"licenseKey":"42869b6ed3","agent":"js-agent.newrelic.com/nr-411.min.js","transactionName":"b1QHMUtVDRdSW0YKXVYeIxBXVxcNXFYdFFtTWEsTUFEUFwlcXQBHVVQLEQ==","applicationID":"3172075","errorBeacon":"bam.nr-data.net","applicationTime":337}</script></body>

<!-- Mirrored from developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAnnotationService by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Aug 2014 20:10:14 GMT -->
</html>